service: sls-test

provider:
  stage: "${opt:stage, self:provider.environment.stage}"
  name: "aws"
  memorySize: 384
  versionFunctions: false
  timeout: 900
  runtime: "nodejs12.x"
  deploymentBucket:
    name: custom-sls-depl-bucket-123

functions:
  test:
    handler: "handler.test"
    events:
      - cloudwatchEvent:
          name: sls-test-cf-event
          event:
            source: aws.cloudformation
            detail-type: AWS API Call from CloudFormation
            detail:
              eventName:
                - CreateStack
                - UpdateStack
      - http:
          path: /test/v1
          method: get
          integration: lambda-proxy

plugins:
  - serverless-deployment-bucket
  - serverless-localstack

custom:
  localstack:
    stages: "local"
