{
  "tests/integration/awslambda/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_event_source_mapping": {
    "recorded-date": "01-09-2022, 19:17:25",
    "recorded-content": {
      "create-table-result": {
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        },
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "my_partition_key",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "datetime",
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "my_partition_key",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:aws:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        }
      },
      "create_event_source_mapping_response": {
        "BatchSize": 1,
        "BisectBatchOnFunctionError": false,
        "DestinationConfig": {
          "OnFailure": {}
        },
        "EventSourceArn": "arn:aws:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
        "FunctionArn": "arn:aws:lambda:<region>:111111111111:function:<resource:3>",
        "FunctionResponseTypes": [],
        "LastModified": "datetime",
        "LastProcessingResult": "No records processed",
        "MaximumBatchingWindowInSeconds": 1,
        "MaximumRecordAgeInSeconds": -1,
        "MaximumRetryAttempts": 1,
        "ParallelizationFactor": 1,
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 202
        },
        "StartingPosition": "TRIM_HORIZON",
        "State": "Creating",
        "StateTransitionReason": "User action",
        "TumblingWindowInSeconds": 0,
        "UUID": "<uuid:2>"
      },
      "event_logs": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 54,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:aws:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ]
    }
  },
  "tests/integration/awslambda/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_disabled_dynamodb_event_source_mapping": {
    "recorded-date": "01-09-2022, 19:31:30",
    "recorded-content": {
      "dynamodb_create_table_result": {
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        },
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "id",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "datetime",
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "id",
              "KeyType": "HASH"
            }
          ],
          "LatestStreamArn": "arn:aws:dynamodb:<region>:111111111111:table/<resource:2>/stream/<resource:1>",
          "LatestStreamLabel": "<resource:1>",
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "StreamSpecification": {
            "StreamEnabled": true,
            "StreamViewType": "NEW_IMAGE"
          },
          "TableArn": "arn:aws:dynamodb:<region>:111111111111:table/<resource:2>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:2>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        }
      },
      "create_event_source_mapping_result": {
        "BatchSize": 100,
        "BisectBatchOnFunctionError": false,
        "DestinationConfig": {
          "OnFailure": {}
        },
        "EventSourceArn": "arn:aws:dynamodb:<region>:111111111111:table/<resource:2>/stream/<resource:1>",
        "FunctionArn": "arn:aws:lambda:<region>:111111111111:function:<resource:3>",
        "FunctionResponseTypes": [],
        "LastModified": "datetime",
        "LastProcessingResult": "No records processed",
        "MaximumBatchingWindowInSeconds": 1,
        "MaximumRecordAgeInSeconds": -1,
        "MaximumRetryAttempts": -1,
        "ParallelizationFactor": 1,
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 202
        },
        "StartingPosition": "TRIM_HORIZON",
        "State": "Creating",
        "StateTransitionReason": "User action",
        "TumblingWindowInSeconds": 0,
        "UUID": "<uuid:2>"
      },
      "update_event_source_mapping_result": {
        "BatchSize": 100,
        "BisectBatchOnFunctionError": false,
        "DestinationConfig": {
          "OnFailure": {}
        },
        "EventSourceArn": "arn:aws:dynamodb:<region>:111111111111:table/<resource:2>/stream/<resource:1>",
        "FunctionArn": "arn:aws:lambda:<region>:111111111111:function:<resource:3>",
        "FunctionResponseTypes": [],
        "LastModified": "datetime",
        "LastProcessingResult": "OK",
        "MaximumBatchingWindowInSeconds": 1,
        "MaximumRecordAgeInSeconds": -1,
        "MaximumRetryAttempts": -1,
        "ParallelizationFactor": 1,
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 202
        },
        "StartingPosition": "TRIM_HORIZON",
        "State": "Disabling",
        "StateTransitionReason": "User action",
        "TumblingWindowInSeconds": 0,
        "UUID": "<uuid:2>"
      }
    }
  }
}
