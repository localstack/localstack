{
  "tests/integration/test_sns.py::TestSNSProvider::test_tags": {
    "recorded-date": "09-08-2022, 11:30:16",
    "recorded-content": {
      "duplicate-key-error": {
        "Error": {
          "Code": "InvalidParameter",
          "Message": "Invalid parameter: Duplicated keys are not allowed.",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 400
        }
      },
      "list-created-tags": {
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        },
        "Tags": [
          {
            "Key": "k1",
            "Value": "v1"
          },
          {
            "Key": "k2",
            "Value": "v2"
          }
        ]
      },
      "list-after-delete-tags": {
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        },
        "Tags": [
          {
            "Key": "k2",
            "Value": "v2"
          }
        ]
      },
      "list-after-update-tags": {
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        },
        "Tags": [
          {
            "Key": "k2",
            "Value": "v2b"
          }
        ]
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_redrive_policy_sqs_queue_subscription[True]": {
    "recorded-date": "10-08-2022, 11:36:11",
    "recorded-content": {
      "messages": {
        "Messages": [
          {
            "Attributes": {
              "ApproximateFirstReceiveTimestamp": "timestamp",
              "ApproximateReceiveCount": "1",
              "SenderId": "<sender-id>",
              "SentTimestamp": "timestamp"
            },
            "Body": "test_dlq_after_sqs_endpoint_deleted",
            "MD5OfBody": "<md5-hash>",
            "MD5OfMessageAttributes": "<md5-hash>",
            "MessageAttributes": {
              "attr1": {
                "DataType": "Number",
                "StringValue": "111"
              },
              "attr2": {
                "BinaryValue": "b'\\x02\\x03\\x04'",
                "DataType": "Binary"
              }
            },
            "MessageId": "<uuid:1>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_redrive_policy_sqs_queue_subscription[False]": {
    "recorded-date": "10-08-2022, 11:36:14",
    "recorded-content": {
      "messages": {
        "Messages": [
          {
            "Attributes": {
              "ApproximateFirstReceiveTimestamp": "timestamp",
              "ApproximateReceiveCount": "1",
              "SenderId": "<sender-id>",
              "SentTimestamp": "timestamp"
            },
            "Body": {
              "Type": "Notification",
              "MessageId": "<uuid:1>",
              "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:1>",
              "Message": "test_dlq_after_sqs_endpoint_deleted",
              "Timestamp": "date",
              "SignatureVersion": "1",
              "Signature": "<signature>",
              "SigningCertURL": "https://sns.<region>.amazonaws.com/SimpleNotificationService-<signing-cert-file:1>",
              "UnsubscribeURL": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:<region>:111111111111:<resource:1>:<resource:2>",
              "MessageAttributes": {
                "attr2": {
                  "Type": "Binary",
                  "Value": "AgME"
                },
                "attr1": {
                  "Type": "Number",
                  "Value": "111"
                }
              }
            },
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:2>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_publish_unicode_chars": {
    "recorded-date": "09-08-2022, 11:30:03",
    "recorded-content": {
      "received-message": {
        "Messages": [
          {
            "Body": {
              "Type": "Notification",
              "MessageId": "<uuid:1>",
              "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:1>",
              "Message": "\u00f6\u00a7a1\"_!?,. \u00a3$-",
              "Timestamp": "date",
              "SignatureVersion": "1",
              "Signature": "<signature>",
              "SigningCertURL": "https://sns.<region>.amazonaws.com/SimpleNotificationService-<signing-cert-file:1>",
              "UnsubscribeURL": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:<region>:111111111111:<resource:1>:<resource:2>"
            },
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:2>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSSubscription::test_python_lambda_subscribe_sns_topic": {
    "recorded-date": "09-08-2022, 11:30:00",
    "recorded-content": {
      "notification": {
        "Message": "Hello world.",
        "MessageAttributes": {},
        "MessageId": "<uuid:1>",
        "Signature": "<signature>",
        "SignatureVersion": "1",
        "SigningCertUrl": "https://sns.<region>.amazonaws.com/SimpleNotificationService-<signing-cert-file:1>",
        "Subject": "[Subject] Test subject",
        "Timestamp": "date",
        "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:1>",
        "Type": "Notification",
        "UnsubscribeUrl": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:<region>:111111111111:<resource:1>:<resource:2>"
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_attribute_raw_subscribe": {
    "recorded-date": "09-08-2022, 11:30:06",
    "recorded-content": {
      "subscription-attributes": {
        "Attributes": {
          "ConfirmationWasAuthenticated": "true",
          "Endpoint": "arn:aws:sqs:<region>:111111111111:<resource:1>",
          "Owner": "111111111111",
          "PendingConfirmation": "false",
          "Protocol": "sqs",
          "RawMessageDelivery": "true",
          "SubscriptionArn": "arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>",
          "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "messages-response": {
        "Messages": [
          {
            "Body": "This is a test message",
            "MD5OfBody": "<md5-hash>",
            "MD5OfMessageAttributes": "<md5-hash>",
            "MessageAttributes": {
              "store": {
                "BinaryValue": "b'\\x02\\x03\\x04'",
                "DataType": "Binary"
              }
            },
            "MessageId": "<uuid:1>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_subscribe_with_invalid_protocol": {
    "recorded-date": "09-08-2022, 11:30:03",
    "recorded-content": {
      "exception": {
        "Error": {
          "Code": "InvalidParameter",
          "Message": "Invalid parameter: Amazon SNS does not support this protocol string: test-protocol",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 400
        }
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_filter_policy": {
    "recorded-date": "09-08-2022, 11:30:09",
    "recorded-content": {
      "subscription-attributes": {
        "Attributes": {
          "ConfirmationWasAuthenticated": "true",
          "Endpoint": "arn:aws:sqs:<region>:111111111111:<resource:1>",
          "FilterPolicy": {
            "attr1": [
              {
                "numeric": [
                  ">",
                  0,
                  "<=",
                  100
                ]
              }
            ]
          },
          "Owner": "111111111111",
          "PendingConfirmation": "false",
          "Protocol": "sqs",
          "RawMessageDelivery": "false",
          "SubscriptionArn": "arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>",
          "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "messages-0": {
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "messages-1": {
        "Messages": [
          {
            "Body": {
              "Type": "Notification",
              "MessageId": "<uuid:1>",
              "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>",
              "Message": "This is a test message",
              "Timestamp": "date",
              "SignatureVersion": "1",
              "Signature": "<signature>",
              "SigningCertURL": "https://sns.<region>.amazonaws.com/SimpleNotificationService-<signing-cert-file:1>",
              "UnsubscribeURL": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>",
              "MessageAttributes": {
                "attr1": {
                  "Type": "Number",
                  "Value": "99"
                }
              }
            },
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:2>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "messages-2": {
        "Messages": [
          {
            "Body": {
              "Type": "Notification",
              "MessageId": "<uuid:1>",
              "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>",
              "Message": "This is a test message",
              "Timestamp": "date",
              "SignatureVersion": "1",
              "Signature": "<signature>",
              "SigningCertURL": "https://sns.<region>.amazonaws.com/SimpleNotificationService-<signing-cert-file:1>",
              "UnsubscribeURL": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>",
              "MessageAttributes": {
                "attr1": {
                  "Type": "Number",
                  "Value": "99"
                }
              }
            },
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:2>",
            "ReceiptHandle": "<receipt-handle:2>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_exists_filter_policy": {
    "recorded-date": "09-08-2022, 11:30:12",
    "recorded-content": {
      "subscription-attributes-policy-1": {
        "Attributes": {
          "ConfirmationWasAuthenticated": "true",
          "Endpoint": "arn:aws:sqs:<region>:111111111111:<resource:1>",
          "FilterPolicy": {
            "store": [
              {
                "exists": true
              }
            ]
          },
          "Owner": "111111111111",
          "PendingConfirmation": "false",
          "Protocol": "sqs",
          "RawMessageDelivery": "false",
          "SubscriptionArn": "arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>",
          "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "messages-0": {
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "messages-1": {
        "Messages": [
          {
            "Body": {
              "Type": "Notification",
              "MessageId": "<uuid:1>",
              "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>",
              "Message": "message-1",
              "Timestamp": "date",
              "SignatureVersion": "1",
              "Signature": "<signature>",
              "SigningCertURL": "https://sns.<region>.amazonaws.com/SimpleNotificationService-<signing-cert-file:1>",
              "UnsubscribeURL": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>",
              "MessageAttributes": {
                "def": {
                  "Type": "Number",
                  "Value": "99"
                },
                "store": {
                  "Type": "Number",
                  "Value": "99"
                }
              }
            },
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:2>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "messages-2": {
        "Messages": [
          {
            "Body": {
              "Type": "Notification",
              "MessageId": "<uuid:1>",
              "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>",
              "Message": "message-1",
              "Timestamp": "date",
              "SignatureVersion": "1",
              "Signature": "<signature>",
              "SigningCertURL": "https://sns.<region>.amazonaws.com/SimpleNotificationService-<signing-cert-file:1>",
              "UnsubscribeURL": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>",
              "MessageAttributes": {
                "def": {
                  "Type": "Number",
                  "Value": "99"
                },
                "store": {
                  "Type": "Number",
                  "Value": "99"
                }
              }
            },
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:2>",
            "ReceiptHandle": "<receipt-handle:2>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "subscription-attributes-policy-2": {
        "Attributes": {
          "ConfirmationWasAuthenticated": "true",
          "Endpoint": "arn:aws:sqs:<region>:111111111111:<resource:1>",
          "FilterPolicy": {
            "store": [
              {
                "exists": false
              }
            ]
          },
          "Owner": "111111111111",
          "PendingConfirmation": "false",
          "Protocol": "sqs",
          "RawMessageDelivery": "false",
          "SubscriptionArn": "arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>",
          "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "messages-3": {
        "Messages": [
          {
            "Body": {
              "Type": "Notification",
              "MessageId": "<uuid:3>",
              "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>",
              "Message": "message-3",
              "Timestamp": "date",
              "SignatureVersion": "1",
              "Signature": "<signature>",
              "SigningCertURL": "https://sns.<region>.amazonaws.com/SimpleNotificationService-<signing-cert-file:1>",
              "UnsubscribeURL": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>",
              "MessageAttributes": {
                "def": {
                  "Type": "Number",
                  "Value": "99"
                }
              }
            },
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:4>",
            "ReceiptHandle": "<receipt-handle:3>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "messages-4": {
        "Messages": [
          {
            "Body": {
              "Type": "Notification",
              "MessageId": "<uuid:3>",
              "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>",
              "Message": "message-3",
              "Timestamp": "date",
              "SignatureVersion": "1",
              "Signature": "<signature>",
              "SigningCertURL": "https://sns.<region>.amazonaws.com/SimpleNotificationService-<signing-cert-file:1>",
              "UnsubscribeURL": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>",
              "MessageAttributes": {
                "def": {
                  "Type": "Number",
                  "Value": "99"
                }
              }
            },
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:4>",
            "ReceiptHandle": "<receipt-handle:4>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_subscribe_sqs_queue": {
    "recorded-date": "09-08-2022, 11:30:15",
    "recorded-content": {
      "subscription-attributes": {
        "Attributes": {
          "ConfirmationWasAuthenticated": "true",
          "Endpoint": "arn:aws:sqs:<region>:111111111111:<resource:1>",
          "FilterPolicy": {
            "attr1": [
              {
                "numeric": [
                  ">",
                  0,
                  "<=",
                  100
                ]
              }
            ]
          },
          "Owner": "111111111111",
          "PendingConfirmation": "false",
          "Protocol": "sqs",
          "RawMessageDelivery": "false",
          "SubscriptionArn": "arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>",
          "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "messages": {
        "Messages": [
          {
            "Body": {
              "Type": "Notification",
              "MessageId": "<uuid:1>",
              "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>",
              "Message": "This is a test message",
              "Timestamp": "date",
              "SignatureVersion": "1",
              "Signature": "<signature>",
              "SigningCertURL": "https://sns.<region>.amazonaws.com/SimpleNotificationService-<signing-cert-file:1>",
              "UnsubscribeURL": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>",
              "MessageAttributes": {
                "attr1": {
                  "Type": "Number",
                  "Value": "99.12"
                }
              }
            },
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:2>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_unknown_topic_publish": {
    "recorded-date": "09-08-2022, 11:30:15",
    "recorded-content": {
      "error": {
        "Error": {
          "Code": "NotFound",
          "Message": "Topic does not exist",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 404
        }
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_sqs_topic_subscription_confirmation": {
    "recorded-date": "09-08-2022, 11:30:18",
    "recorded-content": {
      "subscription-attrs": {
        "ConfirmationWasAuthenticated": "true",
        "Endpoint": "arn:aws:sqs:<region>:111111111111:<resource:1>",
        "Owner": "111111111111",
        "PendingConfirmation": "false",
        "Protocol": "sqs",
        "RawMessageDelivery": "false",
        "SubscriptionArn": "arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>",
        "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>"
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_sns_topic_as_lambda_dead_letter_queue": {
    "recorded-date": "09-08-2022, 11:34:43",
    "recorded-content": {
      "lambda-response-dlq-config": {
        "TargetArn": "arn:aws:sns:<region>:111111111111:<resource:1>"
      },
      "messages": {
        "Messages": [
          {
            "Body": {
              "Message": {
                "Records": [
                  {
                    "EventSource": "aws:sns",
                    "EventSubscriptionArn": "arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>",
                    "EventVersion": "1.0",
                    "Sns": {
                      "Message": {
                        "raise_error": 1
                      },
                      "MessageAttributes": {},
                      "MessageId": "<uuid:1>",
                      "Signature": "<signature>",
                      "SignatureVersion": "1",
                      "SigningCertUrl": "https://sns.<region>.amazonaws.com/SimpleNotificationService-<signing-cert-file:1>",
                      "Subject": null,
                      "Timestamp": "date",
                      "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>",
                      "Type": "Notification",
                      "UnsubscribeUrl": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>"
                    }
                  }
                ]
              },
              "MessageAttributes": {
                "ErrorCode": {
                  "Type": "Number",
                  "Value": "200"
                },
                "ErrorMessage": {
                  "Type": "String",
                  "Value": "Test exception (this is intentional)"
                },
                "RequestID": {
                  "Type": "String",
                  "Value": "<request-id:1>"
                }
              },
              "MessageId": "<uuid:2>",
              "Signature": "<signature>",
              "SignatureVersion": "1",
              "SigningCertURL": "https://sns.<region>.amazonaws.com/SimpleNotificationService-<signing-cert-file:1>",
              "Timestamp": "date",
              "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:1>",
              "Type": "Notification",
              "UnsubscribeURL": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:<region>:111111111111:<resource:1>:<resource:4>"
            },
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:3>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_redrive_policy_lambda_subscription": {
    "recorded-date": "11-08-2022, 14:36:27",
    "recorded-content": {
      "subscription-attributes": {
        "Attributes": {
          "ConfirmationWasAuthenticated": "true",
          "Endpoint": "arn:aws:lambda:<region>:111111111111:function:<resource:1>",
          "Owner": "111111111111",
          "PendingConfirmation": "false",
          "Protocol": "lambda",
          "RawMessageDelivery": "false",
          "RedrivePolicy": {
            "deadLetterTargetArn": "arn:aws:sqs:<region>:111111111111:<resource:2>"
          },
          "SubscriptionArn": "arn:aws:sns:<region>:111111111111:<resource:4>:<resource:3>",
          "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:4>"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "messages": {
        "Messages": [
          {
            "Body": {
              "Type": "Notification",
              "MessageId": "<uuid:1>",
              "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:4>",
              "Message": "test_redrive_policy",
              "Timestamp": "date",
              "SignatureVersion": "1",
              "Signature": "<signature>",
              "SigningCertURL": "https://sns.<region>.amazonaws.com/SimpleNotificationService-<signing-cert-file:1>",
              "UnsubscribeURL": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:<region>:111111111111:<resource:4>:<resource:3>",
              "MessageAttributes": {
                "attr1": {
                  "Type": "Number",
                  "Value": "1"
                }
              }
            },
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:2>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_publish_with_empty_subject": {
    "recorded-date": "09-08-2022, 11:34:56",
    "recorded-content": {
      "response-without-subject": {
        "MessageId": "<uuid:1>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "response-with-empty-subject": {
        "Error": {
          "Code": "InvalidParameter",
          "Message": "Invalid parameter: Subject",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 400
        }
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_create_topic_test_arn": {
    "recorded-date": "09-08-2022, 11:34:57",
    "recorded-content": {
      "create-topic": {
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        },
        "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:1>"
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_publish_message_by_target_arn": {
    "recorded-date": "09-08-2022, 11:34:59",
    "recorded-content": {
      "receive-topic-arn": {
        "Messages": [
          {
            "Body": {
              "Type": "Notification",
              "MessageId": "<uuid:1>",
              "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:1>",
              "Message": "test-msg-1",
              "Timestamp": "date",
              "SignatureVersion": "1",
              "Signature": "<signature>",
              "SigningCertURL": "https://sns.<region>.amazonaws.com/SimpleNotificationService-<signing-cert-file:1>",
              "UnsubscribeURL": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:<region>:111111111111:<resource:1>:<resource:2>"
            },
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:2>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "receive-target-arn": {
        "Messages": [
          {
            "Body": {
              "Type": "Notification",
              "MessageId": "<uuid:3>",
              "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:1>",
              "Message": "test-msg-2",
              "Timestamp": "date",
              "SignatureVersion": "1",
              "Signature": "<signature>",
              "SigningCertURL": "https://sns.<region>.amazonaws.com/SimpleNotificationService-<signing-cert-file:1>",
              "UnsubscribeURL": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:<region>:111111111111:<resource:1>:<resource:2>"
            },
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:4>",
            "ReceiptHandle": "<receipt-handle:2>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_publish_message_before_subscribe_topic": {
    "recorded-date": "09-08-2022, 11:35:08",
    "recorded-content": {
      "publish-before-subscribing": {
        "MessageId": "<uuid:1>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "publish-after-subscribing": {
        "MessageId": "<uuid:2>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "receive-messages": {
        "Messages": [
          {
            "Body": {
              "Type": "Notification",
              "MessageId": "<uuid:2>",
              "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:1>",
              "Subject": "test-subject-after-sub",
              "Message": "test_message_after",
              "Timestamp": "date",
              "SignatureVersion": "1",
              "Signature": "<signature>",
              "SigningCertURL": "https://sns.<region>.amazonaws.com/SimpleNotificationService-<signing-cert-file:1>",
              "UnsubscribeURL": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:<region>:111111111111:<resource:1>:<resource:2>"
            },
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:3>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_create_duplicate_topic_with_more_tags": {
    "recorded-date": "09-08-2022, 11:35:08",
    "recorded-content": {
      "exception-duplicate": {
        "Error": {
          "Code": "InvalidParameter",
          "Message": "Invalid parameter: Tags Reason: Topic already exists with different tags",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 400
        }
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_create_duplicate_topic_check_idempotency": {
    "recorded-date": "09-08-2022, 11:35:09",
    "recorded-content": {
      "response-created": {
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        },
        "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:1>"
      },
      "response-same-arn-0": {
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        },
        "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:1>"
      },
      "response-same-arn-1": {
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        },
        "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:1>"
      },
      "response-same-arn-2": {
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        },
        "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:1>"
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_publish_by_path_parameters": {
    "recorded-date": "09-08-2022, 11:35:12",
    "recorded-content": {
      "post-request": {
        "PublishResponse": {
          "PublishResult": {
            "MessageId": "<uuid:1>"
          },
          "ResponseMetadata": {
            "HTTPHeaders": {},
            "HTTPStatusCode": 200
          }
        }
      },
      "messages": {
        "Messages": [
          {
            "Body": {
              "Type": "Notification",
              "MessageId": "<uuid:1>",
              "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:1>",
              "Message": "test message direct post request",
              "Timestamp": "date",
              "SignatureVersion": "1",
              "Signature": "<signature>",
              "SigningCertURL": "https://sns.<region>.amazonaws.com/SimpleNotificationService-<signing-cert-file:1>",
              "UnsubscribeURL": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:<region>:111111111111:<resource:1>:<resource:2>"
            },
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:2>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_publish_sqs_from_sns": {
    "recorded-date": "09-08-2022, 11:35:22",
    "recorded-content": {
      "sub-attrs-raw-true": {
        "Attributes": {
          "ConfirmationWasAuthenticated": "true",
          "Endpoint": "arn:aws:sqs:<region>:111111111111:<resource:1>",
          "Owner": "111111111111",
          "PendingConfirmation": "false",
          "Protocol": "sqs",
          "RawMessageDelivery": "true",
          "SubscriptionArn": "arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>",
          "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "message-raw-true": {
        "Messages": [
          {
            "Body": "Test msg",
            "MD5OfBody": "<md5-hash>",
            "MD5OfMessageAttributes": "d302007e9aa062660afc85fd0a482472",
            "MessageAttributes": {
              "attr1": {
                "DataType": "Number",
                "StringValue": "99.12"
              }
            },
            "MessageId": "<uuid:1>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "sub-attrs-raw-false": {
        "Attributes": {
          "ConfirmationWasAuthenticated": "true",
          "Endpoint": "arn:aws:sqs:<region>:111111111111:<resource:1>",
          "Owner": "111111111111",
          "PendingConfirmation": "false",
          "Protocol": "sqs",
          "RawMessageDelivery": "false",
          "SubscriptionArn": "arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>",
          "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "message-raw-false": {
        "Messages": [
          {
            "Body": {
              "Type": "Notification",
              "MessageId": "<uuid:2>",
              "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>",
              "Message": "Test msg",
              "Timestamp": "date",
              "SignatureVersion": "1",
              "Signature": "<signature>",
              "SigningCertURL": "https://sns.<region>.amazonaws.com/SimpleNotificationService-<signing-cert-file:1>",
              "UnsubscribeURL": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>",
              "MessageAttributes": {
                "attr1": {
                  "Type": "Number",
                  "Value": "100.12"
                }
              }
            },
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:3>",
            "ReceiptHandle": "<receipt-handle:2>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_publish_batch_messages_from_sns_to_sqs": {
    "recorded-date": "09-08-2022, 11:36:59",
    "recorded-content": {
      "sub-attrs-raw-true": {
        "Attributes": {
          "ConfirmationWasAuthenticated": "true",
          "Endpoint": "arn:aws:sqs:<region>:111111111111:<resource:1>",
          "Owner": "111111111111",
          "PendingConfirmation": "false",
          "Protocol": "sqs",
          "RawMessageDelivery": "true",
          "SubscriptionArn": "arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>",
          "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "publish-batch": {
        "Failed": [],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        },
        "Successful": [
          {
            "Id": "1",
            "MessageId": "<uuid:1>"
          },
          {
            "Id": "2",
            "MessageId": "<uuid:2>"
          },
          {
            "Id": "3",
            "MessageId": "<uuid:3>"
          },
          {
            "Id": "4",
            "MessageId": "<uuid:4>"
          }
        ]
      },
      "messages": {
        "Messages": [
          {
            "Attributes": {
              "ApproximateFirstReceiveTimestamp": "timestamp",
              "ApproximateReceiveCount": "1",
              "SenderId": "<sender-id>",
              "SentTimestamp": "timestamp"
            },
            "Body": "Test Message with one attribute",
            "MD5OfBody": "<md5-hash>",
            "MD5OfMessageAttributes": "1f07082409022a373fa2a2601f82b3cb",
            "MessageAttributes": {
              "attr1": {
                "DataType": "Number",
                "StringValue": "19.12"
              }
            },
            "MessageId": "<uuid:5>",
            "ReceiptHandle": "<receipt-handle:1>"
          },
          {
            "Attributes": {
              "ApproximateFirstReceiveTimestamp": "timestamp",
              "ApproximateReceiveCount": "1",
              "SenderId": "<sender-id>",
              "SentTimestamp": "timestamp"
            },
            "Body": "Test Message with two attributes",
            "MD5OfBody": "<md5-hash>",
            "MD5OfMessageAttributes": "9b720b3af309c1c4b0d395c53b08c502",
            "MessageAttributes": {
              "attr1": {
                "DataType": "Number",
                "StringValue": "99.12"
              },
              "attr2": {
                "DataType": "Number",
                "StringValue": "109.12"
              }
            },
            "MessageId": "<uuid:6>",
            "ReceiptHandle": "<receipt-handle:2>"
          },
          {
            "Attributes": {
              "ApproximateFirstReceiveTimestamp": "timestamp",
              "ApproximateReceiveCount": "1",
              "SenderId": "<sender-id>",
              "SentTimestamp": "timestamp"
            },
            "Body": "Test Message without attribute",
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:7>",
            "ReceiptHandle": "<receipt-handle:3>"
          },
          {
            "Attributes": {
              "ApproximateFirstReceiveTimestamp": "timestamp",
              "ApproximateReceiveCount": "1",
              "SenderId": "<sender-id>",
              "SentTimestamp": "timestamp"
            },
            "Body": "Test Message without subject",
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:8>",
            "ReceiptHandle": "<receipt-handle:4>"
          }
        ]
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_publish_batch_messages_from_fifo_topic_to_fifo_queue": {
    "recorded-date": "09-08-2022, 11:35:46",
    "recorded-content": {
      "topic-attrs": {
        "Attributes": {
          "ContentBasedDeduplication": "true",
          "DisplayName": "",
          "EffectiveDeliveryPolicy": {
            "http": {
              "defaultHealthyRetryPolicy": {
                "minDelayTarget": 20,
                "maxDelayTarget": 20,
                "numRetries": 3,
                "numMaxDelayRetries": 0,
                "numNoDelayRetries": 0,
                "numMinDelayRetries": 0,
                "backoffFunction": "linear"
              },
              "disableSubscriptionOverrides": false
            }
          },
          "FifoTopic": "true",
          "Owner": "111111111111",
          "Policy": {
            "Version": "2008-10-17",
            "Id": "__default_policy_ID",
            "Statement": [
              {
                "Sid": "__default_statement_ID",
                "Effect": "Allow",
                "Principal": {
                  "AWS": "*"
                },
                "Action": [
                  "SNS:GetTopicAttributes",
                  "SNS:SetTopicAttributes",
                  "SNS:AddPermission",
                  "SNS:RemovePermission",
                  "SNS:DeleteTopic",
                  "SNS:Subscribe",
                  "SNS:ListSubscriptionsByTopic",
                  "SNS:Publish"
                ],
                "Resource": "arn:aws:sns:<region>:111111111111:<resource:1>",
                "Condition": {
                  "StringEquals": {
                    "AWS:SourceOwner": "111111111111"
                  }
                }
              }
            ]
          },
          "SubscriptionsConfirmed": "0",
          "SubscriptionsDeleted": "0",
          "SubscriptionsPending": "0",
          "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:1>"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "sub-attrs-raw-true": {
        "Attributes": {
          "ConfirmationWasAuthenticated": "true",
          "Endpoint": "arn:aws:sqs:<region>:111111111111:<resource:2>",
          "Owner": "111111111111",
          "PendingConfirmation": "false",
          "Protocol": "sqs",
          "RawMessageDelivery": "true",
          "SubscriptionArn": "arn:aws:sns:<region>:111111111111:<resource:1>:<resource:3>",
          "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:1>"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "publish-batch-response-fifo": {
        "Failed": [],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        },
        "Successful": [
          {
            "Id": "1",
            "MessageId": "<uuid:1>",
            "SequenceNumber": "<sequence-number:1>"
          },
          {
            "Id": "2",
            "MessageId": "<uuid:2>",
            "SequenceNumber": "<sequence-number:2>"
          },
          {
            "Id": "3",
            "MessageId": "<uuid:3>",
            "SequenceNumber": "<sequence-number:3>"
          }
        ]
      },
      "messages": {
        "Messages": [
          {
            "Attributes": {
              "ApproximateFirstReceiveTimestamp": "timestamp",
              "ApproximateReceiveCount": "1",
              "MessageDeduplicationId": "47f6d7e2c477469ad670ae3bfee60ed3e79080bb0105fc01a2805a50f8b21358",
              "MessageGroupId": "complexMessageGroupId",
              "SenderId": "<sender-id>",
              "SentTimestamp": "timestamp",
              "SequenceNumber": "<sequence-number:4>"
            },
            "Body": "Test Message with two attributes",
            "MD5OfBody": "<md5-hash>",
            "MD5OfMessageAttributes": "9b720b3af309c1c4b0d395c53b08c502",
            "MessageAttributes": {
              "attr1": {
                "DataType": "Number",
                "StringValue": "99.12"
              },
              "attr2": {
                "DataType": "Number",
                "StringValue": "109.12"
              }
            },
            "MessageId": "<uuid:4>",
            "ReceiptHandle": "<receipt-handle:1>"
          },
          {
            "Attributes": {
              "ApproximateFirstReceiveTimestamp": "timestamp",
              "ApproximateReceiveCount": "1",
              "MessageDeduplicationId": "2186166772ec2fb49b7ba9efbda53c6eabf8e785cb00420db531c8eb9287d8e1",
              "MessageGroupId": "complexMessageGroupId",
              "SenderId": "<sender-id>",
              "SentTimestamp": "timestamp",
              "SequenceNumber": "<sequence-number:5>"
            },
            "Body": "Test Message with one attribute",
            "MD5OfBody": "<md5-hash>",
            "MD5OfMessageAttributes": "1f07082409022a373fa2a2601f82b3cb",
            "MessageAttributes": {
              "attr1": {
                "DataType": "Number",
                "StringValue": "19.12"
              }
            },
            "MessageId": "<uuid:5>",
            "ReceiptHandle": "<receipt-handle:2>"
          },
          {
            "Attributes": {
              "ApproximateFirstReceiveTimestamp": "timestamp",
              "ApproximateReceiveCount": "1",
              "MessageDeduplicationId": "a579d4ebff398c5ad4d5037534a1c1bfab36410100c80d8c7c1029b57c7898fe",
              "MessageGroupId": "complexMessageGroupId",
              "SenderId": "<sender-id>",
              "SentTimestamp": "timestamp",
              "SequenceNumber": "<sequence-number:6>"
            },
            "Body": "Test Message without attribute",
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:6>",
            "ReceiptHandle": "<receipt-handle:3>"
          }
        ]
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_publish_batch_exceptions": {
    "recorded-date": "09-08-2022, 11:35:46",
    "recorded-content": {
      "no-group-id": {
        "Error": {
          "Code": "InvalidParameter",
          "Message": "Invalid parameter: The MessageGroupId parameter is required for FIFO topics",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 400
        }
      },
      "too-many-msg": {
        "Error": {
          "Code": "TooManyEntriesInBatchRequest",
          "Message": "The batch request contains more entries than permissible.",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 400
        }
      },
      "same-msg-id": {
        "Error": {
          "Code": "BatchEntryIdsNotDistinct",
          "Message": "Two or more batch entries in the request have the same Id.",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 400
        }
      },
      "no-dedup-id": {
        "Error": {
          "Code": "InvalidParameter",
          "Message": "Invalid parameter: The topic should either have ContentBasedDeduplication enabled or MessageDeduplicationId provided explicitly",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 400
        }
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_create_topic_after_delete_with_new_tags": {
    "recorded-date": "09-08-2022, 11:35:47",
    "recorded-content": {
      "topic-0": {
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        },
        "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:1>"
      },
      "topic-1": {
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        },
        "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:1>"
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_not_found_error_on_set_subscription_attributes": {
    "recorded-date": "09-08-2022, 11:35:51",
    "recorded-content": {
      "sub": {
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        },
        "SubscriptionArn": "arn:aws:sns:<region>:111111111111:<resource:3>:<resource:1>"
      },
      "sub-attrs": {
        "Attributes": {
          "ConfirmationWasAuthenticated": "true",
          "Endpoint": "arn:aws:sqs:<region>:111111111111:<resource:2>",
          "Owner": "111111111111",
          "PendingConfirmation": "false",
          "Protocol": "sqs",
          "RawMessageDelivery": "false",
          "SubscriptionArn": "arn:aws:sns:<region>:111111111111:<resource:3>:<resource:1>",
          "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "subscriptions-for-topic-before-unsub": {
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        },
        "Subscriptions": [
          {
            "Endpoint": "arn:aws:sqs:<region>:111111111111:<resource:2>",
            "Owner": "111111111111",
            "Protocol": "sqs",
            "SubscriptionArn": "arn:aws:sns:<region>:111111111111:<resource:3>:<resource:1>",
            "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>"
          }
        ]
      },
      "sub-not-found": {
        "Error": {
          "Code": "NotFound",
          "Message": "Subscription does not exist",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 404
        }
      },
      "subscriptions-for-topic-after-unsub": {
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        },
        "Subscriptions": []
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_message_to_fifo_sqs": {
    "recorded-date": "09-08-2022, 11:35:53",
    "recorded-content": {
      "messages": {
        "Messages": [
          {
            "Attributes": {
              "ApproximateFirstReceiveTimestamp": "timestamp",
              "ApproximateReceiveCount": "1",
              "MessageDeduplicationId": "<md5-hash>",
              "MessageGroupId": "message-group-id-1",
              "SenderId": "<sender-id>",
              "SentTimestamp": "timestamp",
              "SequenceNumber": "<sequence-number:1>"
            },
            "Body": {
              "Type": "Notification",
              "MessageId": "<uuid:1>",
              "SequenceNumber": "<sequence-number:2>",
              "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:1>",
              "Message": "Test",
              "Timestamp": "date",
              "UnsubscribeURL": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:<region>:111111111111:<resource:1>:<resource:2>"
            },
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:2>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_validations_for_fifo": {
    "recorded-date": "09-08-2022, 11:35:56",
    "recorded-content": {
      "not-fifo-topic": {
        "Error": {
          "Code": "InvalidParameter",
          "Message": "Invalid parameter: Invalid parameter: Endpoint Reason: FIFO SQS Queues can not be subscribed to standard SNS topics",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 400
        }
      },
      "no-msg-group-id": {
        "Error": {
          "Code": "InvalidParameter",
          "Message": "Invalid parameter: The MessageGroupId parameter is required for FIFO topics",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 400
        }
      },
      "no-dedup-policy": {
        "Error": {
          "Code": "InvalidParameter",
          "Message": "Invalid parameter: The topic should either have ContentBasedDeduplication enabled or MessageDeduplicationId provided explicitly",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 400
        }
      },
      "no-msg-dedup-regular-topic": {
        "Error": {
          "Code": "InvalidParameter",
          "Message": "Invalid parameter: MessageDeduplicationId Reason: The request includes MessageDeduplicationId parameter that is not valid for this topic type",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 400
        }
      },
      "no-msg-group-id-regular-topic": {
        "Error": {
          "Code": "InvalidParameter",
          "Message": "Invalid parameter: MessageGroupId Reason: The request includes MessageGroupId parameter that is not valid for this topic type",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 400
        }
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_empty_sns_message": {
    "recorded-date": "09-08-2022, 11:35:58",
    "recorded-content": {
      "empty-msg-error": {
        "Error": {
          "Code": "InvalidParameter",
          "Message": "Invalid parameter: Empty message",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 400
        }
      },
      "queue-attrs": {
        "Attributes": {
          "ApproximateNumberOfMessages": "0"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_message_attributes_not_missing": {
    "recorded-date": "09-08-2022, 11:36:07",
    "recorded-content": {
      "publish-msg-raw": {
        "MessageId": "<uuid:1>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "raw-delivery-msg-attrs": {
        "Messages": [
          {
            "Attributes": {
              "ApproximateFirstReceiveTimestamp": "timestamp",
              "ApproximateReceiveCount": "1",
              "SenderId": "<sender-id>",
              "SentTimestamp": "timestamp"
            },
            "Body": "text",
            "MD5OfBody": "<md5-hash>",
            "MD5OfMessageAttributes": "<md5-hash>",
            "MessageAttributes": {
              "an-attribute-key": {
                "DataType": "String",
                "StringValue": "an-attribute-value"
              },
              "binary-attribute": {
                "BinaryValue": "b'\\x02\\x03\\x04'",
                "DataType": "Binary"
              }
            },
            "MessageId": "<uuid:2>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "publish-msg-json": {
        "MessageId": "<uuid:3>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "json-delivery-msg-attrs": {
        "Messages": [
          {
            "Attributes": {
              "ApproximateFirstReceiveTimestamp": "timestamp",
              "ApproximateReceiveCount": "1",
              "SenderId": "<sender-id>",
              "SentTimestamp": "timestamp"
            },
            "Body": {
              "Type": "Notification",
              "MessageId": "<uuid:3>",
              "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:1>",
              "Message": "text",
              "Timestamp": "date",
              "SignatureVersion": "1",
              "Signature": "<signature>",
              "SigningCertURL": "https://sns.<region>.amazonaws.com/SimpleNotificationService-<signing-cert-file:1>",
              "UnsubscribeURL": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:<region>:111111111111:<resource:1>:<resource:2>",
              "MessageAttributes": {
                "an-attribute-key": {
                  "Type": "String",
                  "Value": "an-attribute-value"
                },
                "binary-attribute": {
                  "Type": "Binary",
                  "Value": "AgME"
                }
              }
            },
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:4>",
            "ReceiptHandle": "<receipt-handle:2>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_publish_too_long_message": {
    "recorded-date": "09-08-2022, 11:36:07",
    "recorded-content": {
      "error": {
        "Error": {
          "Code": "InvalidParameter",
          "Message": "Invalid parameter: Message too long",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 400
        }
      }
    }
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_publish_sqs_from_sns_with_xray_propagation": {
    "recorded-date": "09-08-2022, 11:35:46",
    "recorded-content": {}
  },
  "tests/integration/test_sns.py::TestSNSProvider::test_subscription_after_failure_to_deliver": {
    "recorded-date": "10-08-2022, 17:04:52",
    "recorded-content": {
      "subscriptions-attrs": {
        "Attributes": {
          "ConfirmationWasAuthenticated": "true",
          "Endpoint": "arn:aws:sqs:<region>:111111111111:<resource:1>",
          "Owner": "111111111111",
          "PendingConfirmation": "false",
          "Protocol": "sqs",
          "RawMessageDelivery": "false",
          "SubscriptionArn": "arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>",
          "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "messages-before-delete": {
        "Messages": [
          {
            "Body": {
              "Type": "Notification",
              "MessageId": "<uuid:1>",
              "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>",
              "Message": "test_dlq_before_sqs_endpoint_deleted",
              "Timestamp": "date",
              "SignatureVersion": "1",
              "Signature": "<signature>",
              "SigningCertURL": "https://sns.<region>.amazonaws.com/SimpleNotificationService-<signing-cert-file:1>",
              "UnsubscribeURL": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>"
            },
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:2>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "subscriptions": {
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        },
        "Subscriptions": [
          {
            "Endpoint": "arn:aws:sqs:<region>:111111111111:<resource:1>",
            "Owner": "111111111111",
            "Protocol": "sqs",
            "SubscriptionArn": "arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>",
            "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>"
          }
        ]
      },
      "subscriptions-attrs-with-redrive": {
        "Attributes": {
          "ConfirmationWasAuthenticated": "true",
          "Endpoint": "arn:aws:sqs:<region>:111111111111:<resource:1>",
          "Owner": "111111111111",
          "PendingConfirmation": "false",
          "Protocol": "sqs",
          "RawMessageDelivery": "false",
          "RedrivePolicy": {
            "deadLetterTargetArn": "arn:aws:sqs:<region>:111111111111:<resource:4>"
          },
          "SubscriptionArn": "arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>",
          "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "message-0-after-delete": {
        "Messages": [
          {
            "Body": {
              "Type": "Notification",
              "MessageId": "<uuid:3>",
              "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>",
              "Message": "test_dlq_after_sqs_endpoint_deleted_0",
              "Timestamp": "date",
              "SignatureVersion": "1",
              "Signature": "<signature>",
              "SigningCertURL": "https://sns.<region>.amazonaws.com/SimpleNotificationService-<signing-cert-file:1>",
              "UnsubscribeURL": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>"
            },
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:4>",
            "ReceiptHandle": "<receipt-handle:2>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "message-1-after-delete": {
        "Messages": [
          {
            "Body": {
              "Type": "Notification",
              "MessageId": "<uuid:5>",
              "TopicArn": "arn:aws:sns:<region>:111111111111:<resource:3>",
              "Message": "test_dlq_after_sqs_endpoint_deleted_1",
              "Timestamp": "date",
              "SignatureVersion": "1",
              "Signature": "<signature>",
              "SigningCertURL": "https://sns.<region>.amazonaws.com/SimpleNotificationService-<signing-cert-file:1>",
              "UnsubscribeURL": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:<region>:111111111111:<resource:3>:<resource:2>"
            },
            "MD5OfBody": "<md5-hash>",
            "MessageId": "<uuid:6>",
            "ReceiptHandle": "<receipt-handle:3>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  }
}
