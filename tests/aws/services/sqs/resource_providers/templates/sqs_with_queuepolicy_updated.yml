#
# A standard SQS queue with an associated queue policy allowing a slightly different set of actions compared
# to sqs_with_queuepolicy.yml.
#
Resources:
  Queue1:
    Type: AWS::SQS::Queue
  Queue2:
    Type: AWS::SQS::Queue
  Queue3:
    Type: AWS::SQS::Queue

  QueuePolicy25439813:
    Type: AWS::SQS::QueuePolicy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - sqs:SendMessage
              - sqs:GetQueueAttributes
              - sqs:GetQueueUrl
              - sqs:DeleteMessage
            Effect: Allow
            Principal: "*"
            Resource:
              Fn::GetAtt:
                - Queue1
                - Arn
        Version: "2012-10-17"
      Queues:
        - Ref: Queue1
Outputs:
  Queue1Url:
    Value:
      Ref: Queue1
  Queue2Url:
    Value:
      Ref: Queue2
  Queue3Url:
    Value:
      Ref: Queue3
