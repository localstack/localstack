{
  "tests/aws/services/cloudformation/resources/test_cdk.py::TestCdkSampleApp::test_cdk_sample": {
    "recorded-date": "04-11-2022, 15:15:44",
    "recorded-content": {
      "queue_attr_policy": {
        "Attributes": {
          "Policy": {
            "Version": "2012-10-17",
            "Statement": [
              {
                "Effect": "Allow",
                "Principal": {
                  "Service": "sns.amazonaws.com"
                },
                "Action": "sqs:SendMessage",
                "Resource": "arn:<partition>:sqs:<region>:111111111111:<resource:1>",
                "Condition": {
                  "ArnEquals": {
                    "aws:SourceArn": "arn:<partition>:sns:<region>:111111111111:<resource:2>"
                  }
                }
              }
            ]
          }
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "stack_resources": {
        "StackResourceSummaries": [
          {
            "DriftInformation": {
              "StackResourceDriftStatus": "NOT_CHECKED"
            },
            "LastUpdatedTimestamp": "timestamp",
            "LogicalResourceId": "CdksampleQueue3139C8CD",
            "PhysicalResourceId": "https://sqs.<region>.amazonaws.com/111111111111/<resource:1>",
            "ResourceStatus": "CREATE_COMPLETE",
            "ResourceType": "AWS::SQS::Queue"
          },
          {
            "DriftInformation": {
              "StackResourceDriftStatus": "NOT_CHECKED"
            },
            "LastUpdatedTimestamp": "timestamp",
            "LogicalResourceId": "CdksampleQueueCdksampleStackCdksampleTopicCB3FDFDDC0BCF47C",
            "PhysicalResourceId": "arn:<partition>:sns:<region>:111111111111:<resource:2>:<resource:3>",
            "ResourceStatus": "CREATE_COMPLETE",
            "ResourceType": "AWS::SNS::Subscription"
          },
          {
            "DriftInformation": {
              "StackResourceDriftStatus": "NOT_CHECKED"
            },
            "LastUpdatedTimestamp": "timestamp",
            "LogicalResourceId": "CdksampleQueuePolicyFA91005A",
            "PhysicalResourceId": "<queue-policy-physid>",
            "ResourceStatus": "CREATE_COMPLETE",
            "ResourceType": "AWS::SQS::QueuePolicy"
          },
          {
            "DriftInformation": {
              "StackResourceDriftStatus": "NOT_CHECKED"
            },
            "LastUpdatedTimestamp": "timestamp",
            "LogicalResourceId": "CdksampleTopic7AD235A4",
            "PhysicalResourceId": "arn:<partition>:sns:<region>:111111111111:<resource:2>",
            "ResourceStatus": "CREATE_COMPLETE",
            "ResourceType": "AWS::SNS::Topic"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/aws/services/cloudformation/resources/test_cdk.py::TestCdkInit::test_cdk_bootstrap_redeploy[v20]": {
    "recorded-date": "07-08-2025, 11:33:03",
    "recorded-content": {
      "describe-change-set": {
        "Capabilities": [
          "CAPABILITY_IAM",
          "CAPABILITY_NAMED_IAM",
          "CAPABILITY_AUTO_EXPAND"
        ],
        "ChangeSetId": "arn:<partition>:cloudformation:<region>:111111111111:changeSet/<resource:1>",
        "ChangeSetName": "<change-set-name:1>",
        "Changes": [
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "CdkBootstrapVersion",
              "ResourceType": "AWS::SSM::Parameter",
              "Scope": []
            },
            "Type": "Resource"
          },
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "CloudFormationExecutionRole",
              "ResourceType": "AWS::IAM::Role",
              "Scope": []
            },
            "Type": "Resource"
          },
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "ContainerAssetsRepository",
              "ResourceType": "AWS::ECR::Repository",
              "Scope": []
            },
            "Type": "Resource"
          },
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "DeploymentActionRole",
              "ResourceType": "AWS::IAM::Role",
              "Scope": []
            },
            "Type": "Resource"
          },
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "FilePublishingRoleDefaultPolicy",
              "ResourceType": "AWS::IAM::Policy",
              "Scope": []
            },
            "Type": "Resource"
          },
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "FilePublishingRole",
              "ResourceType": "AWS::IAM::Role",
              "Scope": []
            },
            "Type": "Resource"
          },
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "ImagePublishingRoleDefaultPolicy",
              "ResourceType": "AWS::IAM::Policy",
              "Scope": []
            },
            "Type": "Resource"
          },
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "ImagePublishingRole",
              "ResourceType": "AWS::IAM::Role",
              "Scope": []
            },
            "Type": "Resource"
          },
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "LookupRole",
              "ResourceType": "AWS::IAM::Role",
              "Scope": []
            },
            "Type": "Resource"
          },
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "StagingBucketPolicy",
              "ResourceType": "AWS::S3::BucketPolicy",
              "Scope": []
            },
            "Type": "Resource"
          },
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "StagingBucket",
              "ResourceType": "AWS::S3::Bucket",
              "Scope": []
            },
            "Type": "Resource"
          }
        ],
        "CreationTime": "datetime",
        "Description": "CDK Changeset for execution 731ed7da-8b2d-49c6-bca3-4698b6875954",
        "ExecutionStatus": "AVAILABLE",
        "IncludeNestedStacks": false,
        "NotificationARNs": [],
        "Parameters": [
          {
            "ParameterKey": "BootstrapVariant",
            "ParameterValue": "AWS CDK: Default Resources"
          },
          {
            "ParameterKey": "CloudFormationExecutionPolicies",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "ContainerAssetsRepositoryName",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "FileAssetsBucketKmsKeyId",
            "ParameterValue": "AWS_MANAGED_KEY"
          },
          {
            "ParameterKey": "FileAssetsBucketName",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "InputPermissionsBoundary",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "PublicAccessBlockConfiguration",
            "ParameterValue": "true"
          },
          {
            "ParameterKey": "Qualifier",
            "ParameterValue": "<qualifier>"
          },
          {
            "ParameterKey": "TrustedAccounts",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "TrustedAccountsForLookup",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "UseExamplePermissionsBoundary",
            "ParameterValue": "false"
          }
        ],
        "RollbackConfiguration": {},
        "StackId": "arn:<partition>:cloudformation:<region>:111111111111:stack/<stack-name:1>/<resource:2>",
        "StackName": "<stack-name:1>",
        "Status": "CREATE_COMPLETE",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "describe-stacks": {
        "Capabilities": [
          "CAPABILITY_IAM",
          "CAPABILITY_NAMED_IAM",
          "CAPABILITY_AUTO_EXPAND"
        ],
        "ChangeSetId": "arn:<partition>:cloudformation:<region>:111111111111:changeSet/<resource:1>",
        "CreationTime": "datetime",
        "Description": "This stack includes resources needed to deploy AWS CDK apps into this environment",
        "DisableRollback": false,
        "DriftInformation": {
          "StackDriftStatus": "NOT_CHECKED"
        },
        "EnableTerminationProtection": false,
        "LastUpdatedTime": "datetime",
        "NotificationARNs": [],
        "Outputs": [
          {
            "Description": "The version of the bootstrap resources that are currently mastered in this stack",
            "OutputKey": "BootstrapVersion",
            "OutputValue": "20"
          },
          {
            "Description": "The domain name of the S3 bucket owned by the CDK toolkit stack",
            "OutputKey": "BucketDomainName",
            "OutputValue": "cdk-<qualifier>-assets-111111111111-<region>.s3.<region>.amazonaws.com"
          },
          {
            "Description": "The name of the S3 bucket owned by the CDK toolkit stack",
            "OutputKey": "BucketName",
            "OutputValue": "cdk-<qualifier>-assets-111111111111-<region>"
          },
          {
            "Description": "The ARN of the KMS key used to encrypt the asset bucket (deprecated)",
            "ExportName": "CdkBootstrap-<qualifier>-FileAssetKeyArn",
            "OutputKey": "FileAssetKeyArn",
            "OutputValue": "AWS_MANAGED_KEY"
          },
          {
            "Description": "The name of the ECR repository which hosts docker image assets",
            "OutputKey": "ImageRepositoryName",
            "OutputValue": "cdk-<qualifier>-container-assets-111111111111-<region>"
          }
        ],
        "Parameters": [
          {
            "ParameterKey": "BootstrapVariant",
            "ParameterValue": "AWS CDK: Default Resources"
          },
          {
            "ParameterKey": "CloudFormationExecutionPolicies",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "ContainerAssetsRepositoryName",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "FileAssetsBucketKmsKeyId",
            "ParameterValue": "AWS_MANAGED_KEY"
          },
          {
            "ParameterKey": "FileAssetsBucketName",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "InputPermissionsBoundary",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "PublicAccessBlockConfiguration",
            "ParameterValue": "true"
          },
          {
            "ParameterKey": "Qualifier",
            "ParameterValue": "<qualifier>"
          },
          {
            "ParameterKey": "TrustedAccounts",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "TrustedAccountsForLookup",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "UseExamplePermissionsBoundary",
            "ParameterValue": "false"
          }
        ],
        "RollbackConfiguration": {},
        "StackId": "arn:<partition>:cloudformation:<region>:111111111111:stack/<stack-name:1>/<resource:2>",
        "StackName": "<stack-name:1>",
        "StackStatus": "CREATE_COMPLETE",
        "Tags": []
      }
    }
  },
  "tests/aws/services/cloudformation/resources/test_cdk.py::TestCdkInit::test_cdk_bootstrap_redeploy[v28]": {
    "recorded-date": "07-08-2025, 11:34:16",
    "recorded-content": {
      "describe-change-set": {
        "Capabilities": [
          "CAPABILITY_IAM",
          "CAPABILITY_NAMED_IAM",
          "CAPABILITY_AUTO_EXPAND"
        ],
        "ChangeSetId": "arn:<partition>:cloudformation:<region>:111111111111:changeSet/<resource:1>",
        "ChangeSetName": "<change-set-name:1>",
        "Changes": [
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "CdkBootstrapVersion",
              "ResourceType": "AWS::SSM::Parameter",
              "Scope": []
            },
            "Type": "Resource"
          },
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "CloudFormationExecutionRole",
              "ResourceType": "AWS::IAM::Role",
              "Scope": []
            },
            "Type": "Resource"
          },
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "ContainerAssetsRepository",
              "ResourceType": "AWS::ECR::Repository",
              "Scope": []
            },
            "Type": "Resource"
          },
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "DeploymentActionRole",
              "ResourceType": "AWS::IAM::Role",
              "Scope": []
            },
            "Type": "Resource"
          },
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "FilePublishingRoleDefaultPolicy",
              "ResourceType": "AWS::IAM::Policy",
              "Scope": []
            },
            "Type": "Resource"
          },
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "FilePublishingRole",
              "ResourceType": "AWS::IAM::Role",
              "Scope": []
            },
            "Type": "Resource"
          },
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "ImagePublishingRoleDefaultPolicy",
              "ResourceType": "AWS::IAM::Policy",
              "Scope": []
            },
            "Type": "Resource"
          },
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "ImagePublishingRole",
              "ResourceType": "AWS::IAM::Role",
              "Scope": []
            },
            "Type": "Resource"
          },
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "LookupRole",
              "ResourceType": "AWS::IAM::Role",
              "Scope": []
            },
            "Type": "Resource"
          },
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "StagingBucketPolicy",
              "ResourceType": "AWS::S3::BucketPolicy",
              "Scope": []
            },
            "Type": "Resource"
          },
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "StagingBucket",
              "ResourceType": "AWS::S3::Bucket",
              "Scope": []
            },
            "Type": "Resource"
          }
        ],
        "CreationTime": "datetime",
        "Description": "CDK Changeset for execution 731ed7da-8b2d-49c6-bca3-4698b6875954",
        "ExecutionStatus": "AVAILABLE",
        "IncludeNestedStacks": false,
        "NotificationARNs": [],
        "Parameters": [
          {
            "ParameterKey": "BootstrapVariant",
            "ParameterValue": "AWS CDK: Default Resources"
          },
          {
            "ParameterKey": "CloudFormationExecutionPolicies",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "ContainerAssetsRepositoryName",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "FileAssetsBucketKmsKeyId",
            "ParameterValue": "AWS_MANAGED_KEY"
          },
          {
            "ParameterKey": "FileAssetsBucketName",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "InputPermissionsBoundary",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "PublicAccessBlockConfiguration",
            "ParameterValue": "true"
          },
          {
            "ParameterKey": "Qualifier",
            "ParameterValue": "<qualifier>"
          },
          {
            "ParameterKey": "TrustedAccounts",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "TrustedAccountsForLookup",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "UseExamplePermissionsBoundary",
            "ParameterValue": "false"
          }
        ],
        "RollbackConfiguration": {},
        "StackId": "arn:<partition>:cloudformation:<region>:111111111111:stack/<stack-name:1>/<resource:2>",
        "StackName": "<stack-name:1>",
        "Status": "CREATE_COMPLETE",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "describe-stacks": {
        "Capabilities": [
          "CAPABILITY_IAM",
          "CAPABILITY_NAMED_IAM",
          "CAPABILITY_AUTO_EXPAND"
        ],
        "ChangeSetId": "arn:<partition>:cloudformation:<region>:111111111111:changeSet/<resource:1>",
        "CreationTime": "datetime",
        "Description": "This stack includes resources needed to deploy AWS CDK apps into this environment",
        "DisableRollback": false,
        "DriftInformation": {
          "StackDriftStatus": "NOT_CHECKED"
        },
        "EnableTerminationProtection": false,
        "LastUpdatedTime": "datetime",
        "NotificationARNs": [],
        "Outputs": [
          {
            "Description": "The version of the bootstrap resources that are currently mastered in this stack",
            "OutputKey": "BootstrapVersion",
            "OutputValue": "28"
          },
          {
            "Description": "The domain name of the S3 bucket owned by the CDK toolkit stack",
            "OutputKey": "BucketDomainName",
            "OutputValue": "cdk-<qualifier>-assets-111111111111-<region>.s3.<region>.amazonaws.com"
          },
          {
            "Description": "The name of the S3 bucket owned by the CDK toolkit stack",
            "OutputKey": "BucketName",
            "OutputValue": "cdk-<qualifier>-assets-111111111111-<region>"
          },
          {
            "Description": "The ARN of the KMS key used to encrypt the asset bucket (deprecated)",
            "ExportName": "CdkBootstrap-<qualifier>-FileAssetKeyArn",
            "OutputKey": "FileAssetKeyArn",
            "OutputValue": "AWS_MANAGED_KEY"
          },
          {
            "Description": "The name of the ECR repository which hosts docker image assets",
            "OutputKey": "ImageRepositoryName",
            "OutputValue": "cdk-<qualifier>-container-assets-111111111111-<region>"
          }
        ],
        "Parameters": [
          {
            "ParameterKey": "BootstrapVariant",
            "ParameterValue": "AWS CDK: Default Resources"
          },
          {
            "ParameterKey": "CloudFormationExecutionPolicies",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "ContainerAssetsRepositoryName",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "FileAssetsBucketKmsKeyId",
            "ParameterValue": "AWS_MANAGED_KEY"
          },
          {
            "ParameterKey": "FileAssetsBucketName",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "InputPermissionsBoundary",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "PublicAccessBlockConfiguration",
            "ParameterValue": "true"
          },
          {
            "ParameterKey": "Qualifier",
            "ParameterValue": "<qualifier>"
          },
          {
            "ParameterKey": "TrustedAccounts",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "TrustedAccountsForLookup",
            "ParameterValue": ""
          },
          {
            "ParameterKey": "UseExamplePermissionsBoundary",
            "ParameterValue": "false"
          }
        ],
        "RollbackConfiguration": {},
        "StackId": "arn:<partition>:cloudformation:<region>:111111111111:stack/<stack-name:1>/<resource:2>",
        "StackName": "<stack-name:1>",
        "StackStatus": "CREATE_COMPLETE",
        "Tags": []
      }
    }
  }
}
