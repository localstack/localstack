{
  "tests/aws/services/apigateway/test_apigateway_extended.py::test_export_swagger_openapi[TEST_IMPORT_PETSTORE_SWAGGER]": {
    "recorded-date": "15-04-2024, 21:43:25",
    "recorded-content": {
      "import-api": {
        "apiKeySource": "HEADER",
        "createdDate": "datetime",
        "description": "Your first API with Amazon API Gateway. This is a sample API that integrates via HTTP with our demo Pet Store endpoints",
        "disableExecuteApiEndpoint": false,
        "endpointConfiguration": {
          "types": [
            "EDGE"
          ]
        },
        "id": "<api-id:1>",
        "name": "PetStore",
        "rootResourceId": "<root-resource-id:1>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 201
        }
      },
      "get-export": {
        "body": {
          "swagger": "2.0",
          "info": {
            "description": "Your first API with Amazon API Gateway. This is a sample API that integrates via HTTP with our demo Pet Store endpoints",
            "version": "date",
            "title": "PetStore"
          },
          "host": "<api-id:1>.execute-api.<region>.amazonaws.com",
          "basePath": "/local",
          "schemes": [
            "https"
          ],
          "paths": {
            "/": {
              "get": {
                "consumes": [
                  "application/json"
                ],
                "produces": [
                  "text/html"
                ],
                "responses": {
                  "200": {
                    "description": "200 response",
                    "headers": {
                      "Content-Type": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            },
            "/pets": {
              "get": {
                "produces": [
                  "application/json"
                ],
                "parameters": [
                  {
                    "name": "type",
                    "in": "query",
                    "required": false,
                    "type": "string"
                  },
                  {
                    "name": "page",
                    "in": "query",
                    "required": false,
                    "type": "string"
                  }
                ],
                "responses": {
                  "200": {
                    "description": "200 response",
                    "schema": {
                      "$ref": "#/definitions/Pets"
                    },
                    "headers": {
                      "Access-Control-Allow-Origin": {
                        "type": "string"
                      }
                    }
                  }
                }
              },
              "post": {
                "operationId": "CreatePet",
                "consumes": [
                  "application/json"
                ],
                "produces": [
                  "application/json"
                ],
                "parameters": [
                  {
                    "in": "body",
                    "name": "NewPet",
                    "required": true,
                    "schema": {
                      "$ref": "#/definitions/NewPet"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "200 response",
                    "schema": {
                      "$ref": "#/definitions/NewPetResponse"
                    },
                    "headers": {
                      "Access-Control-Allow-Origin": {
                        "type": "string"
                      }
                    }
                  }
                }
              },
              "options": {
                "consumes": [
                  "application/json"
                ],
                "produces": [
                  "application/json"
                ],
                "responses": {
                  "200": {
                    "description": "200 response",
                    "schema": {
                      "$ref": "#/definitions/Empty"
                    },
                    "headers": {
                      "Access-Control-Allow-Origin": {
                        "type": "string"
                      },
                      "Access-Control-Allow-Methods": {
                        "type": "string"
                      },
                      "Access-Control-Allow-Headers": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            },
            "/pets/{petId}": {
              "get": {
                "operationId": "GetPet",
                "produces": [
                  "application/json"
                ],
                "parameters": [
                  {
                    "name": "petId",
                    "in": "path",
                    "required": true,
                    "type": "string"
                  }
                ],
                "responses": {
                  "200": {
                    "description": "200 response",
                    "schema": {
                      "$ref": "#/definitions/Pet"
                    },
                    "headers": {
                      "Access-Control-Allow-Origin": {
                        "type": "string"
                      }
                    }
                  }
                }
              },
              "options": {
                "consumes": [
                  "application/json"
                ],
                "produces": [
                  "application/json"
                ],
                "parameters": [
                  {
                    "name": "petId",
                    "in": "path",
                    "required": true,
                    "type": "string"
                  }
                ],
                "responses": {
                  "200": {
                    "description": "200 response",
                    "schema": {
                      "$ref": "#/definitions/Empty"
                    },
                    "headers": {
                      "Access-Control-Allow-Origin": {
                        "type": "string"
                      },
                      "Access-Control-Allow-Methods": {
                        "type": "string"
                      },
                      "Access-Control-Allow-Headers": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          },
          "definitions": {
            "Pets": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Pet"
              }
            },
            "Empty": {
              "type": "object"
            },
            "NewPetResponse": {
              "type": "object",
              "properties": {
                "pet": {
                  "$ref": "#/definitions/Pet"
                },
                "message": {
                  "type": "string"
                }
              }
            },
            "Pet": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "integer"
                },
                "type": {
                  "type": "string"
                },
                "price": {
                  "type": "number"
                }
              }
            },
            "NewPet": {
              "type": "object",
              "properties": {
                "type": {
                  "$ref": "#/definitions/PetType"
                },
                "price": {
                  "type": "number"
                }
              }
            },
            "PetType": {
              "type": "string",
              "enum": [
                "dog",
                "cat",
                "fish",
                "bird",
                "gecko"
              ]
            }
          }
        },
        "contentDisposition": "attachment; filename=\"swagger_date.json\"",
        "contentType": "application/octet-stream",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "get-export-with-extensions": {
        "body": {
          "swagger": "2.0",
          "info": {
            "description": "Your first API with Amazon API Gateway. This is a sample API that integrates via HTTP with our demo Pet Store endpoints",
            "version": "date",
            "title": "PetStore"
          },
          "host": "<api-id:1>.execute-api.<region>.amazonaws.com",
          "basePath": "/local",
          "schemes": [
            "https"
          ],
          "paths": {
            "/": {
              "get": {
                "consumes": [
                  "application/json"
                ],
                "produces": [
                  "text/html"
                ],
                "responses": {
                  "200": {
                    "description": "200 response",
                    "headers": {
                      "Content-Type": {
                        "type": "string"
                      }
                    }
                  }
                },
                "x-amazon-apigateway-integration": {
                  "type": "mock",
                  "responses": {
                    "default": {
                      "statusCode": "200",
                      "responseParameters": {
                        "method.response.header.Content-Type": "'text/html'"
                      },
                      "responseTemplates": {
                        "text/html": "<html>\n    <head>\n        <style>\n        body {\n            color: #333;\n            font-family: Sans-serif;\n            max-width: 800px;\n            margin: auto;\n        }\n        </style>\n    </head>\n    <body>\n        <h1>Welcome to your Pet Store API</h1>\n        <p>\n            You have successfully deployed your first API. You are seeing this HTML page because the <code>GET</code> method to the root resource of your API returns this content as a Mock integration.\n        </p>\n        <p>\n            The Pet Store API contains the <code>/pets</code> and <code>/pets/{petId}</code> resources. By making a <a href=\"/$context.stage/pets/\" target=\"_blank\"><code>GET</code> request</a> to <code>/pets</code> you can retrieve a list of Pets in your API. If you are looking for a specific pet, for example the pet with ID 1, you can make a <a href=\"/$context.stage/pets/1\" target=\"_blank\"><code>GET</code> request</a> to <code>/pets/1</code>.\n        </p>\n        <p>\n            You can use a REST client such as <a href=\"https://www.getpostman.com/\" target=\"_blank\">Postman</a> to test the <code>POST</code> methods in your API to create a new pet. Use the sample body below to send the <code>POST</code> request:\n        </p>\n        <pre>\n{\n    \"type\" : \"cat\",\n    \"price\" : 123.11\n}\n        </pre>\n    </body>\n</html>"
                      }
                    }
                  },
                  "requestTemplates": {
                    "application/json": "{\"statusCode\": 200}"
                  },
                  "passthroughBehavior": "when_no_match"
                }
              }
            },
            "/pets": {
              "get": {
                "produces": [
                  "application/json"
                ],
                "parameters": [
                  {
                    "name": "type",
                    "in": "query",
                    "required": false,
                    "type": "string"
                  },
                  {
                    "name": "page",
                    "in": "query",
                    "required": false,
                    "type": "string"
                  }
                ],
                "responses": {
                  "200": {
                    "description": "200 response",
                    "schema": {
                      "$ref": "#/definitions/Pets"
                    },
                    "headers": {
                      "Access-Control-Allow-Origin": {
                        "type": "string"
                      }
                    }
                  }
                },
                "x-amazon-apigateway-integration": {
                  "type": "http",
                  "httpMethod": "GET",
                  "uri": "http://petstore.execute-api.<region>.amazonaws.com/petstore/pets",
                  "responses": {
                    "default": {
                      "statusCode": "200",
                      "responseParameters": {
                        "method.response.header.Access-Control-Allow-Origin": "'*'"
                      }
                    }
                  },
                  "requestParameters": {
                    "integration.request.querystring.page": "method.request.querystring.page",
                    "integration.request.querystring.type": "method.request.querystring.type"
                  },
                  "passthroughBehavior": "when_no_match"
                }
              },
              "post": {
                "operationId": "CreatePet",
                "consumes": [
                  "application/json"
                ],
                "produces": [
                  "application/json"
                ],
                "parameters": [
                  {
                    "in": "body",
                    "name": "NewPet",
                    "required": true,
                    "schema": {
                      "$ref": "#/definitions/NewPet"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "200 response",
                    "schema": {
                      "$ref": "#/definitions/NewPetResponse"
                    },
                    "headers": {
                      "Access-Control-Allow-Origin": {
                        "type": "string"
                      }
                    }
                  }
                },
                "x-amazon-apigateway-integration": {
                  "type": "http",
                  "httpMethod": "POST",
                  "uri": "http://petstore.execute-api.<region>.amazonaws.com/petstore/pets",
                  "responses": {
                    "default": {
                      "statusCode": "200",
                      "responseParameters": {
                        "method.response.header.Access-Control-Allow-Origin": "'*'"
                      }
                    }
                  },
                  "passthroughBehavior": "when_no_match"
                }
              },
              "options": {
                "consumes": [
                  "application/json"
                ],
                "produces": [
                  "application/json"
                ],
                "responses": {
                  "200": {
                    "description": "200 response",
                    "schema": {
                      "$ref": "#/definitions/Empty"
                    },
                    "headers": {
                      "Access-Control-Allow-Origin": {
                        "type": "string"
                      },
                      "Access-Control-Allow-Methods": {
                        "type": "string"
                      },
                      "Access-Control-Allow-Headers": {
                        "type": "string"
                      }
                    }
                  }
                },
                "x-amazon-apigateway-integration": {
                  "type": "mock",
                  "responses": {
                    "default": {
                      "statusCode": "200",
                      "responseParameters": {
                        "method.response.header.Access-Control-Allow-Methods": "'POST,GET,OPTIONS'",
                        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                        "method.response.header.Access-Control-Allow-Origin": "'*'"
                      }
                    }
                  },
                  "requestTemplates": {
                    "application/json": "{\"statusCode\": 200}"
                  },
                  "passthroughBehavior": "when_no_match"
                }
              }
            },
            "/pets/{petId}": {
              "get": {
                "operationId": "GetPet",
                "produces": [
                  "application/json"
                ],
                "parameters": [
                  {
                    "name": "petId",
                    "in": "path",
                    "required": true,
                    "type": "string"
                  }
                ],
                "responses": {
                  "200": {
                    "description": "200 response",
                    "schema": {
                      "$ref": "#/definitions/Pet"
                    },
                    "headers": {
                      "Access-Control-Allow-Origin": {
                        "type": "string"
                      }
                    }
                  }
                },
                "x-amazon-apigateway-integration": {
                  "type": "http",
                  "httpMethod": "GET",
                  "uri": "http://petstore.execute-api.<region>.amazonaws.com/petstore/pets/{petId}",
                  "responses": {
                    "default": {
                      "statusCode": "200",
                      "responseParameters": {
                        "method.response.header.Access-Control-Allow-Origin": "'*'"
                      }
                    }
                  },
                  "requestParameters": {
                    "integration.request.path.petId": "method.request.path.petId"
                  },
                  "passthroughBehavior": "when_no_match"
                }
              },
              "options": {
                "consumes": [
                  "application/json"
                ],
                "produces": [
                  "application/json"
                ],
                "parameters": [
                  {
                    "name": "petId",
                    "in": "path",
                    "required": true,
                    "type": "string"
                  }
                ],
                "responses": {
                  "200": {
                    "description": "200 response",
                    "schema": {
                      "$ref": "#/definitions/Empty"
                    },
                    "headers": {
                      "Access-Control-Allow-Origin": {
                        "type": "string"
                      },
                      "Access-Control-Allow-Methods": {
                        "type": "string"
                      },
                      "Access-Control-Allow-Headers": {
                        "type": "string"
                      }
                    }
                  }
                },
                "x-amazon-apigateway-integration": {
                  "type": "mock",
                  "responses": {
                    "default": {
                      "statusCode": "200",
                      "responseParameters": {
                        "method.response.header.Access-Control-Allow-Methods": "'GET,OPTIONS'",
                        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                        "method.response.header.Access-Control-Allow-Origin": "'*'"
                      }
                    }
                  },
                  "requestTemplates": {
                    "application/json": "{\"statusCode\": 200}"
                  },
                  "passthroughBehavior": "when_no_match"
                }
              }
            }
          },
          "definitions": {
            "Pets": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Pet"
              }
            },
            "Empty": {
              "type": "object"
            },
            "NewPetResponse": {
              "type": "object",
              "properties": {
                "pet": {
                  "$ref": "#/definitions/Pet"
                },
                "message": {
                  "type": "string"
                }
              }
            },
            "Pet": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "integer"
                },
                "type": {
                  "type": "string"
                },
                "price": {
                  "type": "number"
                }
              }
            },
            "NewPet": {
              "type": "object",
              "properties": {
                "type": {
                  "$ref": "#/definitions/PetType"
                },
                "price": {
                  "type": "number"
                }
              }
            },
            "PetType": {
              "type": "string",
              "enum": [
                "dog",
                "cat",
                "fish",
                "bird",
                "gecko"
              ]
            }
          }
        },
        "contentDisposition": "attachment; filename=\"swagger_date.json\"",
        "contentType": "application/octet-stream",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/aws/services/apigateway/test_apigateway_extended.py::test_export_swagger_openapi[TEST_IMPORT_PETS]": {
    "recorded-date": "15-04-2024, 21:43:56",
    "recorded-content": {
      "import-api": {
        "apiKeySource": "HEADER",
        "createdDate": "datetime",
        "disableExecuteApiEndpoint": false,
        "endpointConfiguration": {
          "types": [
            "EDGE"
          ]
        },
        "id": "<api-id:1>",
        "name": "Simple PetStore (Swagger)",
        "rootResourceId": "<root-resource-id:1>",
        "version": "1.0.0",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 201
        }
      },
      "get-export": {
        "body": {
          "swagger": "2.0",
          "info": {
            "version": "1.0.0",
            "title": "Simple PetStore (Swagger)"
          },
          "host": "<api-id:1>.execute-api.<region>.amazonaws.com",
          "basePath": "/local",
          "schemes": [
            "https"
          ],
          "paths": {
            "/pets": {
              "get": {
                "responses": {
                  "200": {
                    "description": "200 response"
                  }
                }
              }
            },
            "/pets/{petId}": {
              "get": {
                "parameters": [
                  {
                    "name": "petId",
                    "in": "path",
                    "required": true,
                    "type": "string"
                  }
                ],
                "responses": {
                  "200": {
                    "description": "200 response"
                  }
                }
              }
            }
          }
        },
        "contentDisposition": "attachment; filename=\"swagger_1.0.0.json\"",
        "contentType": "application/octet-stream",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "get-export-with-extensions": {
        "body": {
          "swagger": "2.0",
          "info": {
            "version": "1.0.0",
            "title": "Simple PetStore (Swagger)"
          },
          "host": "<api-id:1>.execute-api.<region>.amazonaws.com",
          "basePath": "/local",
          "schemes": [
            "https"
          ],
          "paths": {
            "/pets": {
              "get": {
                "responses": {
                  "200": {
                    "description": "200 response"
                  }
                },
                "x-amazon-apigateway-integration": {
                  "httpMethod": "GET",
                  "uri": "http://petstore-demo-endpoint.execute-api.com/petstore/pets",
                  "responses": {
                    "default": {
                      "statusCode": "200"
                    }
                  },
                  "passthroughBehavior": "when_no_match",
                  "type": "http"
                }
              }
            },
            "/pets/{petId}": {
              "get": {
                "parameters": [
                  {
                    "name": "petId",
                    "in": "path",
                    "required": true,
                    "type": "string"
                  }
                ],
                "responses": {
                  "200": {
                    "description": "200 response"
                  }
                },
                "x-amazon-apigateway-integration": {
                  "httpMethod": "GET",
                  "uri": "http://petstore-demo-endpoint.execute-api.com/petstore/pets/{id}",
                  "responses": {
                    "default": {
                      "statusCode": "200"
                    }
                  },
                  "requestParameters": {
                    "integration.request.path.id": "method.request.path.petId"
                  },
                  "passthroughBehavior": "when_no_match",
                  "type": "http"
                }
              }
            }
          }
        },
        "contentDisposition": "attachment; filename=\"swagger_1.0.0.json\"",
        "contentType": "application/octet-stream",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/aws/services/apigateway/test_apigateway_extended.py::test_export_oas30_openapi[TEST_IMPORT_PETSTORE_SWAGGER]": {
    "recorded-date": "15-04-2024, 21:45:03",
    "recorded-content": {
      "import-api": {
        "apiKeySource": "HEADER",
        "createdDate": "datetime",
        "description": "Your first API with Amazon API Gateway. This is a sample API that integrates via HTTP with our demo Pet Store endpoints",
        "disableExecuteApiEndpoint": false,
        "endpointConfiguration": {
          "types": [
            "EDGE"
          ]
        },
        "id": "<api-id:1>",
        "name": "PetStore",
        "rootResourceId": "<root-resource-id:1>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 201
        }
      },
      "get-export": {
        "body": {
          "openapi": "3.0.1",
          "info": {
            "title": "PetStore",
            "description": "Your first API with Amazon API Gateway. This is a sample API that integrates via HTTP with our demo Pet Store endpoints",
            "version": "date"
          },
          "servers": [
            {
              "url": "https://<api-id:1>.execute-api.<region>.amazonaws.com/{basePath}",
              "variables": {
                "basePath": {
                  "default": "local"
                }
              }
            }
          ],
          "paths": {
            "/pets": {
              "get": {
                "parameters": [
                  {
                    "name": "type",
                    "in": "query",
                    "schema": {
                      "type": "string"
                    }
                  },
                  {
                    "name": "page",
                    "in": "query",
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "200 response",
                    "headers": {
                      "Access-Control-Allow-Origin": {
                        "schema": {
                          "type": "string"
                        }
                      }
                    },
                    "content": {
                      "application/json": {
                        "schema": {
                          "$ref": "#/components/schemas/Pets"
                        }
                      }
                    }
                  }
                }
              },
              "post": {
                "operationId": "CreatePet",
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/NewPet"
                      }
                    }
                  },
                  "required": true
                },
                "responses": {
                  "200": {
                    "description": "200 response",
                    "headers": {
                      "Access-Control-Allow-Origin": {
                        "schema": {
                          "type": "string"
                        }
                      }
                    },
                    "content": {
                      "application/json": {
                        "schema": {
                          "$ref": "#/components/schemas/NewPetResponse"
                        }
                      }
                    }
                  }
                }
              },
              "options": {
                "responses": {
                  "200": {
                    "description": "200 response",
                    "headers": {
                      "Access-Control-Allow-Origin": {
                        "schema": {
                          "type": "string"
                        }
                      },
                      "Access-Control-Allow-Methods": {
                        "schema": {
                          "type": "string"
                        }
                      },
                      "Access-Control-Allow-Headers": {
                        "schema": {
                          "type": "string"
                        }
                      }
                    },
                    "content": {
                      "application/json": {
                        "schema": {
                          "$ref": "#/components/schemas/Empty"
                        }
                      }
                    }
                  }
                }
              }
            },
            "/pets/{petId}": {
              "get": {
                "operationId": "GetPet",
                "parameters": [
                  {
                    "name": "petId",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "200 response",
                    "headers": {
                      "Access-Control-Allow-Origin": {
                        "schema": {
                          "type": "string"
                        }
                      }
                    },
                    "content": {
                      "application/json": {
                        "schema": {
                          "$ref": "#/components/schemas/Pet"
                        }
                      }
                    }
                  }
                }
              },
              "options": {
                "parameters": [
                  {
                    "name": "petId",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "200 response",
                    "headers": {
                      "Access-Control-Allow-Origin": {
                        "schema": {
                          "type": "string"
                        }
                      },
                      "Access-Control-Allow-Methods": {
                        "schema": {
                          "type": "string"
                        }
                      },
                      "Access-Control-Allow-Headers": {
                        "schema": {
                          "type": "string"
                        }
                      }
                    },
                    "content": {
                      "application/json": {
                        "schema": {
                          "$ref": "#/components/schemas/Empty"
                        }
                      }
                    }
                  }
                }
              }
            },
            "/": {
              "get": {
                "responses": {
                  "200": {
                    "description": "200 response",
                    "headers": {
                      "Content-Type": {
                        "schema": {
                          "type": "string"
                        }
                      }
                    },
                    "content": {}
                  }
                }
              }
            }
          },
          "components": {
            "schemas": {
              "Pets": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Pet"
                }
              },
              "Empty": {
                "type": "object"
              },
              "NewPetResponse": {
                "type": "object",
                "properties": {
                  "pet": {
                    "$ref": "#/components/schemas/Pet"
                  },
                  "message": {
                    "type": "string"
                  }
                }
              },
              "Pet": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "integer"
                  },
                  "type": {
                    "type": "string"
                  },
                  "price": {
                    "type": "number"
                  }
                }
              },
              "NewPet": {
                "type": "object",
                "properties": {
                  "type": {
                    "$ref": "#/components/schemas/PetType"
                  },
                  "price": {
                    "type": "number"
                  }
                }
              },
              "PetType": {
                "type": "string",
                "enum": [
                  "dog",
                  "cat",
                  "fish",
                  "bird",
                  "gecko"
                ]
              }
            }
          }
        },
        "contentDisposition": "attachment; filename=\"oas30_date.json\"",
        "contentType": "application/octet-stream",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "get-export-with-extensions": {
        "body": {
          "openapi": "3.0.1",
          "info": {
            "title": "PetStore",
            "description": "Your first API with Amazon API Gateway. This is a sample API that integrates via HTTP with our demo Pet Store endpoints",
            "version": "date"
          },
          "servers": [
            {
              "url": "https://<api-id:1>.execute-api.<region>.amazonaws.com/{basePath}",
              "variables": {
                "basePath": {
                  "default": "local"
                }
              }
            }
          ],
          "paths": {
            "/pets": {
              "get": {
                "parameters": [
                  {
                    "name": "type",
                    "in": "query",
                    "schema": {
                      "type": "string"
                    }
                  },
                  {
                    "name": "page",
                    "in": "query",
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "200 response",
                    "headers": {
                      "Access-Control-Allow-Origin": {
                        "schema": {
                          "type": "string"
                        }
                      }
                    },
                    "content": {
                      "application/json": {
                        "schema": {
                          "$ref": "#/components/schemas/Pets"
                        }
                      }
                    }
                  }
                },
                "x-amazon-apigateway-integration": {
                  "httpMethod": "GET",
                  "uri": "http://petstore.execute-api.<region>.amazonaws.com/petstore/pets",
                  "responses": {
                    "default": {
                      "statusCode": "200",
                      "responseParameters": {
                        "method.response.header.Access-Control-Allow-Origin": "'*'"
                      }
                    }
                  },
                  "requestParameters": {
                    "integration.request.querystring.page": "method.request.querystring.page",
                    "integration.request.querystring.type": "method.request.querystring.type"
                  },
                  "passthroughBehavior": "when_no_match",
                  "type": "http"
                }
              },
              "post": {
                "operationId": "CreatePet",
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/NewPet"
                      }
                    }
                  },
                  "required": true
                },
                "responses": {
                  "200": {
                    "description": "200 response",
                    "headers": {
                      "Access-Control-Allow-Origin": {
                        "schema": {
                          "type": "string"
                        }
                      }
                    },
                    "content": {
                      "application/json": {
                        "schema": {
                          "$ref": "#/components/schemas/NewPetResponse"
                        }
                      }
                    }
                  }
                },
                "x-amazon-apigateway-integration": {
                  "httpMethod": "POST",
                  "uri": "http://petstore.execute-api.<region>.amazonaws.com/petstore/pets",
                  "responses": {
                    "default": {
                      "statusCode": "200",
                      "responseParameters": {
                        "method.response.header.Access-Control-Allow-Origin": "'*'"
                      }
                    }
                  },
                  "passthroughBehavior": "when_no_match",
                  "type": "http"
                }
              },
              "options": {
                "responses": {
                  "200": {
                    "description": "200 response",
                    "headers": {
                      "Access-Control-Allow-Origin": {
                        "schema": {
                          "type": "string"
                        }
                      },
                      "Access-Control-Allow-Methods": {
                        "schema": {
                          "type": "string"
                        }
                      },
                      "Access-Control-Allow-Headers": {
                        "schema": {
                          "type": "string"
                        }
                      }
                    },
                    "content": {
                      "application/json": {
                        "schema": {
                          "$ref": "#/components/schemas/Empty"
                        }
                      }
                    }
                  }
                },
                "x-amazon-apigateway-integration": {
                  "responses": {
                    "default": {
                      "statusCode": "200",
                      "responseParameters": {
                        "method.response.header.Access-Control-Allow-Methods": "'POST,GET,OPTIONS'",
                        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                        "method.response.header.Access-Control-Allow-Origin": "'*'"
                      }
                    }
                  },
                  "requestTemplates": {
                    "application/json": "{\"statusCode\": 200}"
                  },
                  "passthroughBehavior": "when_no_match",
                  "type": "mock"
                }
              }
            },
            "/pets/{petId}": {
              "get": {
                "operationId": "GetPet",
                "parameters": [
                  {
                    "name": "petId",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "200 response",
                    "headers": {
                      "Access-Control-Allow-Origin": {
                        "schema": {
                          "type": "string"
                        }
                      }
                    },
                    "content": {
                      "application/json": {
                        "schema": {
                          "$ref": "#/components/schemas/Pet"
                        }
                      }
                    }
                  }
                },
                "x-amazon-apigateway-integration": {
                  "httpMethod": "GET",
                  "uri": "http://petstore.execute-api.<region>.amazonaws.com/petstore/pets/{petId}",
                  "responses": {
                    "default": {
                      "statusCode": "200",
                      "responseParameters": {
                        "method.response.header.Access-Control-Allow-Origin": "'*'"
                      }
                    }
                  },
                  "requestParameters": {
                    "integration.request.path.petId": "method.request.path.petId"
                  },
                  "passthroughBehavior": "when_no_match",
                  "type": "http"
                }
              },
              "options": {
                "parameters": [
                  {
                    "name": "petId",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "200 response",
                    "headers": {
                      "Access-Control-Allow-Origin": {
                        "schema": {
                          "type": "string"
                        }
                      },
                      "Access-Control-Allow-Methods": {
                        "schema": {
                          "type": "string"
                        }
                      },
                      "Access-Control-Allow-Headers": {
                        "schema": {
                          "type": "string"
                        }
                      }
                    },
                    "content": {
                      "application/json": {
                        "schema": {
                          "$ref": "#/components/schemas/Empty"
                        }
                      }
                    }
                  }
                },
                "x-amazon-apigateway-integration": {
                  "responses": {
                    "default": {
                      "statusCode": "200",
                      "responseParameters": {
                        "method.response.header.Access-Control-Allow-Methods": "'GET,OPTIONS'",
                        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
                        "method.response.header.Access-Control-Allow-Origin": "'*'"
                      }
                    }
                  },
                  "requestTemplates": {
                    "application/json": "{\"statusCode\": 200}"
                  },
                  "passthroughBehavior": "when_no_match",
                  "type": "mock"
                }
              }
            },
            "/": {
              "get": {
                "responses": {
                  "200": {
                    "description": "200 response",
                    "headers": {
                      "Content-Type": {
                        "schema": {
                          "type": "string"
                        }
                      }
                    },
                    "content": {}
                  }
                },
                "x-amazon-apigateway-integration": {
                  "responses": {
                    "default": {
                      "statusCode": "200",
                      "responseParameters": {
                        "method.response.header.Content-Type": "'text/html'"
                      },
                      "responseTemplates": {
                        "text/html": "<html>\n    <head>\n        <style>\n        body {\n            color: #333;\n            font-family: Sans-serif;\n            max-width: 800px;\n            margin: auto;\n        }\n        </style>\n    </head>\n    <body>\n        <h1>Welcome to your Pet Store API</h1>\n        <p>\n            You have successfully deployed your first API. You are seeing this HTML page because the <code>GET</code> method to the root resource of your API returns this content as a Mock integration.\n        </p>\n        <p>\n            The Pet Store API contains the <code>/pets</code> and <code>/pets/{petId}</code> resources. By making a <a href=\"/$context.stage/pets/\" target=\"_blank\"><code>GET</code> request</a> to <code>/pets</code> you can retrieve a list of Pets in your API. If you are looking for a specific pet, for example the pet with ID 1, you can make a <a href=\"/$context.stage/pets/1\" target=\"_blank\"><code>GET</code> request</a> to <code>/pets/1</code>.\n        </p>\n        <p>\n            You can use a REST client such as <a href=\"https://www.getpostman.com/\" target=\"_blank\">Postman</a> to test the <code>POST</code> methods in your API to create a new pet. Use the sample body below to send the <code>POST</code> request:\n        </p>\n        <pre>\n{\n    \"type\" : \"cat\",\n    \"price\" : 123.11\n}\n        </pre>\n    </body>\n</html>"
                      }
                    }
                  },
                  "requestTemplates": {
                    "application/json": "{\"statusCode\": 200}"
                  },
                  "passthroughBehavior": "when_no_match",
                  "type": "mock"
                }
              }
            }
          },
          "components": {
            "schemas": {
              "Pets": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Pet"
                }
              },
              "Empty": {
                "type": "object"
              },
              "NewPetResponse": {
                "type": "object",
                "properties": {
                  "pet": {
                    "$ref": "#/components/schemas/Pet"
                  },
                  "message": {
                    "type": "string"
                  }
                }
              },
              "Pet": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "integer"
                  },
                  "type": {
                    "type": "string"
                  },
                  "price": {
                    "type": "number"
                  }
                }
              },
              "NewPet": {
                "type": "object",
                "properties": {
                  "type": {
                    "$ref": "#/components/schemas/PetType"
                  },
                  "price": {
                    "type": "number"
                  }
                }
              },
              "PetType": {
                "type": "string",
                "enum": [
                  "dog",
                  "cat",
                  "fish",
                  "bird",
                  "gecko"
                ]
              }
            }
          }
        },
        "contentDisposition": "attachment; filename=\"oas30_date.json\"",
        "contentType": "application/octet-stream",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/aws/services/apigateway/test_apigateway_extended.py::test_export_oas30_openapi[TEST_IMPORT_PETS]": {
    "recorded-date": "15-04-2024, 21:45:07",
    "recorded-content": {
      "import-api": {
        "apiKeySource": "HEADER",
        "createdDate": "datetime",
        "disableExecuteApiEndpoint": false,
        "endpointConfiguration": {
          "types": [
            "EDGE"
          ]
        },
        "id": "<api-id:1>",
        "name": "Simple PetStore (Swagger)",
        "rootResourceId": "<root-resource-id:1>",
        "version": "1.0.0",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 201
        }
      },
      "get-export": {
        "body": {
          "openapi": "3.0.1",
          "info": {
            "title": "Simple PetStore (Swagger)",
            "version": "1.0.0"
          },
          "servers": [
            {
              "url": "https://<api-id:1>.execute-api.<region>.amazonaws.com/{basePath}",
              "variables": {
                "basePath": {
                  "default": "local"
                }
              }
            }
          ],
          "paths": {
            "/pets": {
              "get": {
                "responses": {
                  "200": {
                    "description": "200 response",
                    "content": {}
                  }
                }
              }
            },
            "/pets/{petId}": {
              "get": {
                "parameters": [
                  {
                    "name": "petId",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "200 response",
                    "content": {}
                  }
                }
              }
            }
          },
          "components": {}
        },
        "contentDisposition": "attachment; filename=\"oas30_1.0.0.json\"",
        "contentType": "application/octet-stream",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "get-export-with-extensions": {
        "body": {
          "openapi": "3.0.1",
          "info": {
            "title": "Simple PetStore (Swagger)",
            "version": "1.0.0"
          },
          "servers": [
            {
              "url": "https://<api-id:1>.execute-api.<region>.amazonaws.com/{basePath}",
              "variables": {
                "basePath": {
                  "default": "local"
                }
              }
            }
          ],
          "paths": {
            "/pets": {
              "get": {
                "responses": {
                  "200": {
                    "description": "200 response",
                    "content": {}
                  }
                },
                "x-amazon-apigateway-integration": {
                  "httpMethod": "GET",
                  "uri": "http://petstore-demo-endpoint.execute-api.com/petstore/pets",
                  "responses": {
                    "default": {
                      "statusCode": "200"
                    }
                  },
                  "passthroughBehavior": "when_no_match",
                  "type": "http"
                }
              }
            },
            "/pets/{petId}": {
              "get": {
                "parameters": [
                  {
                    "name": "petId",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "200 response",
                    "content": {}
                  }
                },
                "x-amazon-apigateway-integration": {
                  "httpMethod": "GET",
                  "uri": "http://petstore-demo-endpoint.execute-api.com/petstore/pets/{id}",
                  "responses": {
                    "default": {
                      "statusCode": "200"
                    }
                  },
                  "requestParameters": {
                    "integration.request.path.id": "method.request.path.petId"
                  },
                  "passthroughBehavior": "when_no_match",
                  "type": "http"
                }
              }
            }
          },
          "components": {}
        },
        "contentDisposition": "attachment; filename=\"oas30_1.0.0.json\"",
        "contentType": "application/octet-stream",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/aws/services/apigateway/test_apigateway_extended.py::TestApigatewayApiKeysCrud::test_get_api_keys": {
    "recorded-date": "10-10-2024, 18:53:36",
    "recorded-content": {
      "get-api-keys": {
        "items": [],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "create-api-key": {
        "createdDate": "datetime",
        "enabled": false,
        "id": "<id:1>",
        "lastUpdatedDate": "datetime",
        "name": "<name:1>",
        "stageKeys": [],
        "value": "<value:1>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 201
        }
      },
      "get-api-keys-after-create-1": {
        "items": [
          {
            "createdDate": "datetime",
            "enabled": false,
            "id": "<id:1>",
            "lastUpdatedDate": "datetime",
            "name": "<name:1>",
            "stageKeys": []
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "get-api-keys-wrong-name-query": {
        "items": [],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "get-api-keys-prefix-name-query": {
        "items": [
          {
            "createdDate": "datetime",
            "enabled": false,
            "id": "<id:1>",
            "lastUpdatedDate": "datetime",
            "name": "<name:1>",
            "stageKeys": []
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "get-api-keys-prefix-name-query-cased": {
        "items": [],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "get-api-keys-postfix-name-query": {
        "items": [],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "get-api-keys-infix-name-query": {
        "items": [],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "create-api-key-2": {
        "createdDate": "datetime",
        "enabled": false,
        "id": "<id:2>",
        "lastUpdatedDate": "datetime",
        "name": "<name:2>",
        "stageKeys": [],
        "value": "<value:2>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 201
        }
      },
      "get-api-keys-after-create-2": {
        "items": [
          {
            "createdDate": "datetime",
            "enabled": false,
            "id": "<id:2>",
            "lastUpdatedDate": "datetime",
            "name": "<name:2>",
            "stageKeys": []
          },
          {
            "createdDate": "datetime",
            "enabled": false,
            "id": "<id:1>",
            "lastUpdatedDate": "datetime",
            "name": "<name:1>",
            "stageKeys": []
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "get-api-keys-name-query": {
        "items": [
          {
            "createdDate": "datetime",
            "enabled": false,
            "id": "<id:2>",
            "lastUpdatedDate": "datetime",
            "name": "<name:2>",
            "stageKeys": []
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "get-api-keys-prefix-name-query-2": {
        "items": [
          {
            "createdDate": "datetime",
            "enabled": false,
            "id": "<id:2>",
            "lastUpdatedDate": "datetime",
            "name": "<name:2>",
            "stageKeys": []
          },
          {
            "createdDate": "datetime",
            "enabled": false,
            "id": "<id:1>",
            "lastUpdatedDate": "datetime",
            "name": "<name:1>",
            "stageKeys": []
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "get-apis-keys-pagination": {
        "items": [
          {
            "createdDate": "datetime",
            "enabled": false,
            "id": "<id:2>",
            "lastUpdatedDate": "datetime",
            "name": "<name:2>",
            "stageKeys": []
          }
        ],
        "position": "<position:1>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "get-apis-keys-pagination-2": {
        "items": [
          {
            "createdDate": "datetime",
            "enabled": false,
            "id": "<id:1>",
            "lastUpdatedDate": "datetime",
            "name": "<name:1>",
            "stageKeys": []
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/aws/services/apigateway/test_apigateway_extended.py::TestApigatewayApiKeysCrud::test_get_usage_plan_api_keys": {
    "recorded-date": "10-10-2024, 18:54:42",
    "recorded-content": {
      "get-api-keys": {
        "items": [],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "create-api-key": {
        "createdDate": "datetime",
        "enabled": false,
        "id": "<id:1>",
        "lastUpdatedDate": "datetime",
        "name": "<name:1>",
        "stageKeys": [],
        "value": "<value:1>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 201
        }
      },
      "create-api-key-2": {
        "createdDate": "datetime",
        "enabled": false,
        "id": "<id:1>",
        "lastUpdatedDate": "datetime",
        "name": "<name:1>",
        "stageKeys": [],
        "value": "<value:1>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 201
        }
      },
      "get-api-keys-after-create-1": {
        "items": [
          {
            "createdDate": "datetime",
            "enabled": false,
            "id": "<id:2>",
            "lastUpdatedDate": "datetime",
            "name": "<name:2>",
            "stageKeys": []
          },
          {
            "createdDate": "datetime",
            "enabled": false,
            "id": "<id:1>",
            "lastUpdatedDate": "datetime",
            "name": "<name:1>",
            "stageKeys": []
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "create-usage-plan": {
        "apiStages": [],
        "id": "<id:3>",
        "name": "<name:3>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 201
        }
      },
      "get-up-keys-before-create": {
        "items": [],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "create-up-key": {
        "id": "<id:1>",
        "name": "<name:1>",
        "type": "API_KEY",
        "value": "<value:1>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 201
        }
      },
      "create-up-key-2": {
        "id": "<id:2>",
        "name": "<name:2>",
        "type": "API_KEY",
        "value": "<value:2>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 201
        }
      },
      "get-up-keys": {
        "items": [
          {
            "id": "<id:2>",
            "name": "<name:2>",
            "type": "API_KEY",
            "value": "<value:2>"
          },
          {
            "id": "<id:1>",
            "name": "<name:1>",
            "type": "API_KEY",
            "value": "<value:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "get-up-keys-name-query": {
        "items": [
          {
            "id": "<id:2>",
            "name": "<name:2>",
            "type": "API_KEY",
            "value": "<value:2>"
          },
          {
            "id": "<id:1>",
            "name": "<name:1>",
            "type": "API_KEY",
            "value": "<value:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "get-up-keys-name-query-cased": {
        "items": [],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "get-up-keys-name-query-key-name": {
        "items": [
          {
            "id": "<id:1>",
            "name": "<name:1>",
            "type": "API_KEY",
            "value": "<value:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "get-up-keys-bad-query": {
        "items": [],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "get-up-keys-after-delete": {
        "items": [],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "get-up-keys-bad-usage-plan": {
        "items": [],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  }
}
