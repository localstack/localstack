{
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_event_source_mapping": {
    "recorded-date": "12-10-2024, 10:55:29",
    "recorded-content": {
      "create-table-result": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "my_partition_key",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "my_partition_key",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "create_event_source_mapping_response": {
        "BatchSize": 1,
        "BisectBatchOnFunctionError": false,
        "DestinationConfig": {
          "OnFailure": {}
        },
        "EventSourceArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
        "EventSourceMappingArn": "arn:<partition>:lambda:<region>:111111111111:event-source-mapping:<uuid:2>",
        "FunctionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:3>",
        "FunctionResponseTypes": [],
        "LastModified": "<datetime>",
        "LastProcessingResult": "No records processed",
        "MaximumBatchingWindowInSeconds": 1,
        "MaximumRecordAgeInSeconds": -1,
        "MaximumRetryAttempts": 1,
        "ParallelizationFactor": 1,
        "StartingPosition": "TRIM_HORIZON",
        "State": "Creating",
        "StateTransitionReason": "User action",
        "TumblingWindowInSeconds": 0,
        "UUID": "<uuid:2>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 202
        }
      },
      "event_logs": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ]
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_disabled_dynamodb_event_source_mapping": {
    "recorded-date": "12-10-2024, 10:57:16",
    "recorded-content": {
      "dynamodb_create_table_result": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "id",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "id",
              "KeyType": "HASH"
            }
          ],
          "LatestStreamArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:2>/stream/<resource:1>",
          "LatestStreamLabel": "<resource:1>",
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "StreamSpecification": {
            "StreamEnabled": true,
            "StreamViewType": "NEW_IMAGE"
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:2>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:2>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "create_event_source_mapping_result": {
        "BatchSize": 100,
        "BisectBatchOnFunctionError": false,
        "DestinationConfig": {
          "OnFailure": {}
        },
        "EventSourceArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:2>/stream/<resource:1>",
        "EventSourceMappingArn": "arn:<partition>:lambda:<region>:111111111111:event-source-mapping:<uuid:2>",
        "FunctionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:3>",
        "FunctionResponseTypes": [],
        "LastModified": "<datetime>",
        "LastProcessingResult": "No records processed",
        "MaximumBatchingWindowInSeconds": 1,
        "MaximumRecordAgeInSeconds": -1,
        "MaximumRetryAttempts": -1,
        "ParallelizationFactor": 1,
        "StartingPosition": "TRIM_HORIZON",
        "State": "Creating",
        "StateTransitionReason": "User action",
        "TumblingWindowInSeconds": 0,
        "UUID": "<uuid:2>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 202
        }
      },
      "update_event_source_mapping_result": {
        "BatchSize": 100,
        "BisectBatchOnFunctionError": false,
        "DestinationConfig": {
          "OnFailure": {}
        },
        "EventSourceArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:2>/stream/<resource:1>",
        "EventSourceMappingArn": "arn:<partition>:lambda:<region>:111111111111:event-source-mapping:<uuid:2>",
        "FunctionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:3>",
        "FunctionResponseTypes": [],
        "LastModified": "<datetime>",
        "LastProcessingResult": "OK",
        "MaximumBatchingWindowInSeconds": 1,
        "MaximumRecordAgeInSeconds": -1,
        "MaximumRetryAttempts": -1,
        "ParallelizationFactor": 1,
        "StartingPosition": "TRIM_HORIZON",
        "State": "Disabling",
        "StateTransitionReason": "User action",
        "TumblingWindowInSeconds": 0,
        "UUID": "<uuid:2>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 202
        }
      }
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_deletion_event_source_mapping_with_dynamodb": {
    "recorded-date": "12-10-2024, 10:57:49",
    "recorded-content": {
      "create_dynamodb_table_response": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "id",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "id",
              "KeyType": "HASH"
            }
          ],
          "LatestStreamArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:2>/stream/<resource:1>",
          "LatestStreamLabel": "<resource:1>",
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "StreamSpecification": {
            "StreamEnabled": true,
            "StreamViewType": "NEW_IMAGE"
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:2>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:2>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "create_event_source_mapping_result": {
        "BatchSize": 100,
        "BisectBatchOnFunctionError": false,
        "DestinationConfig": {
          "OnFailure": {}
        },
        "EventSourceArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:2>/stream/<resource:1>",
        "EventSourceMappingArn": "arn:<partition>:lambda:<region>:111111111111:event-source-mapping:<uuid:2>",
        "FunctionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:3>",
        "FunctionResponseTypes": [],
        "LastModified": "<datetime>",
        "LastProcessingResult": "No records processed",
        "MaximumBatchingWindowInSeconds": 0,
        "MaximumRecordAgeInSeconds": -1,
        "MaximumRetryAttempts": -1,
        "ParallelizationFactor": 1,
        "StartingPosition": "TRIM_HORIZON",
        "State": "Creating",
        "StateTransitionReason": "User action",
        "TumblingWindowInSeconds": 0,
        "UUID": "<uuid:2>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 202
        }
      },
      "list_event_source_mapping_result": {
        "EventSourceMappings": [
          {
            "BatchSize": 100,
            "BisectBatchOnFunctionError": false,
            "DestinationConfig": {
              "OnFailure": {}
            },
            "EventSourceArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:2>/stream/<resource:1>",
            "EventSourceMappingArn": "arn:<partition>:lambda:<region>:111111111111:event-source-mapping:<uuid:2>",
            "FunctionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:3>",
            "FunctionResponseTypes": [],
            "LastModified": "<datetime>",
            "LastProcessingResult": "No records processed",
            "MaximumBatchingWindowInSeconds": 0,
            "MaximumRecordAgeInSeconds": -1,
            "MaximumRetryAttempts": -1,
            "ParallelizationFactor": 1,
            "StartingPosition": "TRIM_HORIZON",
            "State": "Enabled",
            "StateTransitionReason": "User action",
            "TumblingWindowInSeconds": 0,
            "UUID": "<uuid:2>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_event_source_mapping_with_on_failure_destination_config": {
    "recorded-date": "12-10-2024, 11:01:18",
    "recorded-content": {
      "create_table_response": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "my_partition_key",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "my_partition_key",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "update_table_response": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "my_partition_key",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST",
            "LastUpdateToPayPerRequestDateTime": "<datetime>"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "my_partition_key",
              "KeyType": "HASH"
            }
          ],
          "LatestStreamArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
          "LatestStreamLabel": "<resource:2>",
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "StreamSpecification": {
            "StreamEnabled": true,
            "StreamViewType": "NEW_IMAGE"
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "UPDATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "create_event_source_mapping_response": {
        "BatchSize": 1,
        "BisectBatchOnFunctionError": false,
        "DestinationConfig": {
          "OnFailure": {
            "Destination": "arn:<partition>:sqs:<region>:111111111111:<resource:3>"
          }
        },
        "EventSourceArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
        "EventSourceMappingArn": "arn:<partition>:lambda:<region>:111111111111:event-source-mapping:<uuid:2>",
        "FunctionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:4>",
        "FunctionResponseTypes": [],
        "LastModified": "<datetime>",
        "LastProcessingResult": "No records processed",
        "MaximumBatchingWindowInSeconds": 1,
        "MaximumRecordAgeInSeconds": -1,
        "MaximumRetryAttempts": 1,
        "ParallelizationFactor": 1,
        "StartingPosition": "TRIM_HORIZON",
        "State": "Creating",
        "StateTransitionReason": "User action",
        "TumblingWindowInSeconds": 0,
        "UUID": "<uuid:2>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 202
        }
      },
      "destination_queue_messages": {
        "Messages": [
          {
            "Body": {
              "requestContext": {
                "requestId": "<uuid:3>",
                "functionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:4>",
                "condition": "RetryAttemptsExhausted",
                "approximateInvokeCount": 2
              },
              "responseContext": {
                "statusCode": 200,
                "executedVersion": "$LATEST",
                "functionError": "Unhandled"
              },
              "version": "1.0",
              "timestamp": "<timestamp:2022-07-13T13:48:01.000Z>",
              "DDBStreamBatchInfo": {
                "shardId": "<shard-id:1>",
                "startSequenceNumber": "<start-sequence-number:1>",
                "endSequenceNumber": "<start-sequence-number:1>",
                "approximateArrivalOfFirstRecord": "<timestamp:2022-07-13T13:48:01Z>",
                "approximateArrivalOfLastRecord": "<timestamp:2022-07-13T13:48:01Z>",
                "batchSize": 1,
                "streamArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
              }
            },
            "MD5OfBody": "<m-d5-of-body:1>",
            "MessageId": "<uuid:4>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_invalid_event_filter[single-string]": {
    "recorded-date": "12-10-2024, 11:21:25",
    "recorded-content": {
      "exception_event_source_creation": {
        "Error": {
          "Code": "InvalidParameterValueException",
          "Message": "Invalid filter pattern definition."
        },
        "Type": "User",
        "message": "Invalid filter pattern definition.",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 400
        }
      }
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_invalid_event_filter[[{\"eventName\": [\"INSERT\"=123}]]": {
    "recorded-date": "12-10-2024, 11:21:41",
    "recorded-content": {
      "exception_event_source_creation": {
        "Error": {
          "Code": "InvalidParameterValueException",
          "Message": "Invalid filter pattern definition."
        },
        "Type": "User",
        "message": "Invalid filter pattern definition.",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 400
        }
      }
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_duplicate_event_source_mappings": {
    "recorded-date": "12-10-2024, 10:55:48",
    "recorded-content": {
      "create-table-result": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "my_partition_key",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "my_partition_key",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "create": {
        "BatchSize": 100,
        "BisectBatchOnFunctionError": false,
        "DestinationConfig": {
          "OnFailure": {}
        },
        "EventSourceArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
        "EventSourceMappingArn": "arn:<partition>:lambda:<region>:111111111111:event-source-mapping:<uuid:2>",
        "FunctionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:3>",
        "FunctionResponseTypes": [],
        "LastModified": "<datetime>",
        "LastProcessingResult": "No records processed",
        "MaximumBatchingWindowInSeconds": 1,
        "MaximumRecordAgeInSeconds": -1,
        "MaximumRetryAttempts": 1,
        "ParallelizationFactor": 1,
        "StartingPosition": "TRIM_HORIZON",
        "State": "Creating",
        "StateTransitionReason": "User action",
        "TumblingWindowInSeconds": 0,
        "UUID": "<uuid:2>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 202
        }
      },
      "error": {
        "Error": {
          "Code": "ResourceConflictException",
          "Message": "The event source arn (\" arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2> \") and function (\" <resource:3> \") provided mapping already exists. Please update or delete the existing mapping with UUID <uuid:2>"
        },
        "Type": "User",
        "message": "The event source arn (\" arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2> \") and function (\" <resource:3> \") provided mapping already exists. Please update or delete the existing mapping with UUID <uuid:2>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 409
        }
      }
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_event_filter[insert_same_entry_twice]": {
    "recorded-date": "12-10-2024, 11:03:08",
    "recorded-content": {
      "table_creation_response": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "id",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "id",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "create_event_source_mapping_response": {
        "BatchSize": 1,
        "BisectBatchOnFunctionError": false,
        "DestinationConfig": {
          "OnFailure": {}
        },
        "EventSourceArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
        "EventSourceMappingArn": "arn:<partition>:lambda:<region>:111111111111:event-source-mapping:<uuid:2>",
        "FilterCriteria": {
          "Filters": [
            {
              "Pattern": {
                "eventName": [
                  "INSERT"
                ]
              }
            }
          ]
        },
        "FunctionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:3>",
        "FunctionResponseTypes": [],
        "LastModified": "<datetime>",
        "LastProcessingResult": "No records processed",
        "MaximumBatchingWindowInSeconds": 1,
        "MaximumRecordAgeInSeconds": -1,
        "MaximumRetryAttempts": 1,
        "ParallelizationFactor": 1,
        "StartingPosition": "TRIM_HORIZON",
        "State": "Creating",
        "StateTransitionReason": "User action",
        "TumblingWindowInSeconds": 0,
        "UUID": "<uuid:2>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 202
        }
      },
      "lambda-log-events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "id": {
                    "S": "id_value"
                  }
                },
                "NewImage": {
                  "id2": {
                    "S": "id2_value"
                  },
                  "id": {
                    "S": "id_value"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 32,
                "StreamViewType": "NEW_AND_OLD_IMAGES"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ],
      "lambda-multiple-log-events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "id": {
                    "S": "id_value"
                  }
                },
                "NewImage": {
                  "id2": {
                    "S": "id2_value"
                  },
                  "id": {
                    "S": "id_value"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 32,
                "StreamViewType": "NEW_AND_OLD_IMAGES"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ]
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_event_filter[content_or_filter]": {
    "recorded-date": "12-10-2024, 11:05:33",
    "recorded-content": {
      "table_creation_response": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "id",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "id",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "create_event_source_mapping_response": {
        "BatchSize": 1,
        "BisectBatchOnFunctionError": false,
        "DestinationConfig": {
          "OnFailure": {}
        },
        "EventSourceArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
        "EventSourceMappingArn": "arn:<partition>:lambda:<region>:111111111111:event-source-mapping:<uuid:2>",
        "FilterCriteria": {
          "Filters": [
            {
              "Pattern": {
                "eventName": [
                  "INSERT",
                  "MODIFY"
                ]
              }
            }
          ]
        },
        "FunctionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:3>",
        "FunctionResponseTypes": [],
        "LastModified": "<datetime>",
        "LastProcessingResult": "No records processed",
        "MaximumBatchingWindowInSeconds": 1,
        "MaximumRecordAgeInSeconds": -1,
        "MaximumRetryAttempts": 1,
        "ParallelizationFactor": 1,
        "StartingPosition": "TRIM_HORIZON",
        "State": "Creating",
        "StateTransitionReason": "User action",
        "TumblingWindowInSeconds": 0,
        "UUID": "<uuid:2>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 202
        }
      },
      "lambda-log-events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "id": {
                    "S": "id_value"
                  }
                },
                "NewImage": {
                  "id": {
                    "S": "id_value"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 20,
                "StreamViewType": "NEW_AND_OLD_IMAGES"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ],
      "lambda-multiple-log-events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "id": {
                    "S": "id_value"
                  }
                },
                "NewImage": {
                  "id": {
                    "S": "id_value"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 20,
                "StreamViewType": "NEW_AND_OLD_IMAGES"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        },
        {
          "Records": [
            {
              "eventID": "<event-i-d:2>",
              "eventName": "MODIFY",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "id": {
                    "S": "id_value"
                  }
                },
                "NewImage": {
                  "id2": {
                    "S": "id2_new_value"
                  },
                  "id": {
                    "S": "id_value"
                  }
                },
                "OldImage": {
                  "id": {
                    "S": "id_value"
                  }
                },
                "SequenceNumber": "<sequence-number:2>",
                "SizeBytes": 46,
                "StreamViewType": "NEW_AND_OLD_IMAGES"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ]
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_event_filter[content_multiple_filters]": {
    "recorded-date": "12-10-2024, 11:07:07",
    "recorded-content": {
      "table_creation_response": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "id",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "id",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "create_event_source_mapping_response": {
        "BatchSize": 1,
        "BisectBatchOnFunctionError": false,
        "DestinationConfig": {
          "OnFailure": {}
        },
        "EventSourceArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
        "EventSourceMappingArn": "arn:<partition>:lambda:<region>:111111111111:event-source-mapping:<uuid:2>",
        "FilterCriteria": {
          "Filters": [
            {
              "Pattern": {
                "eventName": [
                  "INSERT"
                ],
                "eventSource": [
                  "aws:dynamodb"
                ]
              }
            }
          ]
        },
        "FunctionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:3>",
        "FunctionResponseTypes": [],
        "LastModified": "<datetime>",
        "LastProcessingResult": "No records processed",
        "MaximumBatchingWindowInSeconds": 1,
        "MaximumRecordAgeInSeconds": -1,
        "MaximumRetryAttempts": 1,
        "ParallelizationFactor": 1,
        "StartingPosition": "TRIM_HORIZON",
        "State": "Creating",
        "StateTransitionReason": "User action",
        "TumblingWindowInSeconds": 0,
        "UUID": "<uuid:2>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 202
        }
      },
      "lambda-log-events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "id": {
                    "S": "id_value"
                  }
                },
                "NewImage": {
                  "id": {
                    "S": "id_value"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 20,
                "StreamViewType": "NEW_AND_OLD_IMAGES"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ],
      "lambda-multiple-log-events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "id": {
                    "S": "id_value"
                  }
                },
                "NewImage": {
                  "id": {
                    "S": "id_value"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 20,
                "StreamViewType": "NEW_AND_OLD_IMAGES"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ]
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_event_filter[content_filter_type]": {
    "recorded-date": "12-10-2024, 11:08:12",
    "recorded-content": {
      "table_creation_response": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "id",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "id",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "create_event_source_mapping_response": {
        "BatchSize": 1,
        "BisectBatchOnFunctionError": false,
        "DestinationConfig": {
          "OnFailure": {}
        },
        "EventSourceArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
        "EventSourceMappingArn": "arn:<partition>:lambda:<region>:111111111111:event-source-mapping:<uuid:2>",
        "FilterCriteria": {
          "Filters": [
            {
              "Pattern": {
                "dynamodb": {
                  "NewImage": {
                    "presentKey": {
                      "S": [
                        "presentValue"
                      ]
                    }
                  }
                }
              }
            }
          ]
        },
        "FunctionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:3>",
        "FunctionResponseTypes": [],
        "LastModified": "<datetime>",
        "LastProcessingResult": "No records processed",
        "MaximumBatchingWindowInSeconds": 1,
        "MaximumRecordAgeInSeconds": -1,
        "MaximumRetryAttempts": 1,
        "ParallelizationFactor": 1,
        "StartingPosition": "TRIM_HORIZON",
        "State": "Creating",
        "StateTransitionReason": "User action",
        "TumblingWindowInSeconds": 0,
        "UUID": "<uuid:2>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 202
        }
      },
      "lambda-log-events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "id": {
                    "S": "id_value_1"
                  }
                },
                "NewImage": {
                  "id": {
                    "S": "id_value_1"
                  },
                  "presentKey": {
                    "S": "presentValue"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 46,
                "StreamViewType": "NEW_AND_OLD_IMAGES"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ],
      "lambda-multiple-log-events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "id": {
                    "S": "id_value_1"
                  }
                },
                "NewImage": {
                  "id": {
                    "S": "id_value_1"
                  },
                  "presentKey": {
                    "S": "presentValue"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 46,
                "StreamViewType": "NEW_AND_OLD_IMAGES"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ]
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_event_filter[exists_filter_type]": {
    "recorded-date": "12-10-2024, 11:10:06",
    "recorded-content": {
      "table_creation_response": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "id",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "id",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "create_event_source_mapping_response": {
        "BatchSize": 1,
        "BisectBatchOnFunctionError": false,
        "DestinationConfig": {
          "OnFailure": {}
        },
        "EventSourceArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
        "EventSourceMappingArn": "arn:<partition>:lambda:<region>:111111111111:event-source-mapping:<uuid:2>",
        "FilterCriteria": {
          "Filters": [
            {
              "Pattern": {
                "dynamodb": {
                  "NewImage": {
                    "presentKey": {
                      "S": [
                        {
                          "exists": true
                        }
                      ]
                    }
                  }
                }
              }
            }
          ]
        },
        "FunctionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:3>",
        "FunctionResponseTypes": [],
        "LastModified": "<datetime>",
        "LastProcessingResult": "No records processed",
        "MaximumBatchingWindowInSeconds": 1,
        "MaximumRecordAgeInSeconds": -1,
        "MaximumRetryAttempts": 1,
        "ParallelizationFactor": 1,
        "StartingPosition": "TRIM_HORIZON",
        "State": "Creating",
        "StateTransitionReason": "User action",
        "TumblingWindowInSeconds": 0,
        "UUID": "<uuid:2>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 202
        }
      },
      "lambda-log-events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "id": {
                    "S": "id_value_1"
                  }
                },
                "NewImage": {
                  "id": {
                    "S": "id_value_1"
                  },
                  "presentKey": {
                    "S": "presentValue"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 46,
                "StreamViewType": "NEW_AND_OLD_IMAGES"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ],
      "lambda-multiple-log-events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "id": {
                    "S": "id_value_1"
                  }
                },
                "NewImage": {
                  "id": {
                    "S": "id_value_1"
                  },
                  "presentKey": {
                    "S": "presentValue"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 46,
                "StreamViewType": "NEW_AND_OLD_IMAGES"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ]
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_event_filter[exists_false_filter]": {
    "recorded-date": "11-04-2024, 20:56:31",
    "recorded-content": {
      "table_creation_response": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "id",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "datetime",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "id",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "create_event_source_mapping_response": {
        "BatchSize": 1,
        "BisectBatchOnFunctionError": false,
        "DestinationConfig": {
          "OnFailure": {}
        },
        "EventSourceArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
        "FilterCriteria": {
          "Filters": [
            {
              "Pattern": {
                "dynamodb": {
                  "NewImage": {
                    "presentKey": [
                      {
                        "exists": false
                      }
                    ]
                  }
                }
              }
            }
          ]
        },
        "FunctionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:3>",
        "FunctionResponseTypes": [],
        "LastModified": "datetime",
        "LastProcessingResult": "No records processed",
        "MaximumBatchingWindowInSeconds": 1,
        "MaximumRecordAgeInSeconds": -1,
        "MaximumRetryAttempts": 1,
        "ParallelizationFactor": 1,
        "StartingPosition": "TRIM_HORIZON",
        "State": "Creating",
        "StateTransitionReason": "User action",
        "TumblingWindowInSeconds": 0,
        "UUID": "<uuid:2>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 202
        }
      },
      "lambda-log-events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "id": {
                    "S": "id_value_1"
                  }
                },
                "NewImage": {
                  "id": {
                    "S": "id_value_1"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 24,
                "StreamViewType": "NEW_AND_OLD_IMAGES"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ],
      "lambda-multiple-log-events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "id": {
                    "S": "id_value_1"
                  }
                },
                "NewImage": {
                  "id": {
                    "S": "id_value_1"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 24,
                "StreamViewType": "NEW_AND_OLD_IMAGES"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        },
        {
          "Records": [
            {
              "eventID": "<event-i-d:2>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "id": {
                    "S": "id_value_2"
                  }
                },
                "NewImage": {
                  "id": {
                    "S": "id_value_2"
                  },
                  "presentKey": {
                    "S": "presentValue"
                  }
                },
                "SequenceNumber": "<sequence-number:2>",
                "SizeBytes": 46,
                "StreamViewType": "NEW_AND_OLD_IMAGES"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ]
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_event_filter[numeric_filter]": {
    "recorded-date": "11-04-2024, 20:57:39",
    "recorded-content": {
      "table_creation_response": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "id",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "datetime",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "id",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "create_event_source_mapping_response": {
        "BatchSize": 1,
        "BisectBatchOnFunctionError": false,
        "DestinationConfig": {
          "OnFailure": {}
        },
        "EventSourceArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
        "FilterCriteria": {
          "Filters": [
            {
              "Pattern": {
                "dynamodb": {
                  "NewImage": {
                    "numericFilter": {
                      "N": [
                        {
                          "numeric": [
                            ">",
                            100
                          ]
                        },
                        {
                          "anything-but": "101"
                        }
                      ]
                    }
                  }
                }
              }
            }
          ]
        },
        "FunctionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:3>",
        "FunctionResponseTypes": [],
        "LastModified": "datetime",
        "LastProcessingResult": "No records processed",
        "MaximumBatchingWindowInSeconds": 1,
        "MaximumRecordAgeInSeconds": -1,
        "MaximumRetryAttempts": 1,
        "ParallelizationFactor": 1,
        "StartingPosition": "TRIM_HORIZON",
        "State": "Creating",
        "StateTransitionReason": "User action",
        "TumblingWindowInSeconds": 0,
        "UUID": "<uuid:2>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 202
        }
      },
      "lambda-log-events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "id": {
                    "S": "id_value_1"
                  }
                },
                "NewImage": {
                  "numericFilter": {
                    "N": "42"
                  },
                  "id": {
                    "S": "id_value_1"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 39,
                "StreamViewType": "NEW_AND_OLD_IMAGES"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ],
      "lambda-multiple-log-events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "id": {
                    "S": "id_value_1"
                  }
                },
                "NewImage": {
                  "numericFilter": {
                    "N": "42"
                  },
                  "id": {
                    "S": "id_value_1"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 39,
                "StreamViewType": "NEW_AND_OLD_IMAGES"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ]
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_event_filter[prefix_filter]": {
    "recorded-date": "12-10-2024, 11:11:06",
    "recorded-content": {
      "table_creation_response": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "id",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "id",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "create_event_source_mapping_response": {
        "BatchSize": 1,
        "BisectBatchOnFunctionError": false,
        "DestinationConfig": {
          "OnFailure": {}
        },
        "EventSourceArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
        "EventSourceMappingArn": "arn:<partition>:lambda:<region>:111111111111:event-source-mapping:<uuid:2>",
        "FilterCriteria": {
          "Filters": [
            {
              "Pattern": {
                "dynamodb": {
                  "NewImage": {
                    "prefix": {
                      "S": [
                        {
                          "prefix": "us-1"
                        }
                      ]
                    }
                  }
                }
              }
            }
          ]
        },
        "FunctionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:3>",
        "FunctionResponseTypes": [],
        "LastModified": "<datetime>",
        "LastProcessingResult": "No records processed",
        "MaximumBatchingWindowInSeconds": 1,
        "MaximumRecordAgeInSeconds": -1,
        "MaximumRetryAttempts": 1,
        "ParallelizationFactor": 1,
        "StartingPosition": "TRIM_HORIZON",
        "State": "Creating",
        "StateTransitionReason": "User action",
        "TumblingWindowInSeconds": 0,
        "UUID": "<uuid:2>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 202
        }
      },
      "lambda-log-events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "id": {
                    "S": "id_value_1"
                  }
                },
                "NewImage": {
                  "prefix": {
                    "S": "us-1-other-suffix"
                  },
                  "id": {
                    "S": "id_value_1"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 47,
                "StreamViewType": "NEW_AND_OLD_IMAGES"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ],
      "lambda-multiple-log-events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "id": {
                    "S": "id_value_1"
                  }
                },
                "NewImage": {
                  "prefix": {
                    "S": "us-1-other-suffix"
                  },
                  "id": {
                    "S": "id_value_1"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 47,
                "StreamViewType": "NEW_AND_OLD_IMAGES"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ]
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_event_filter[date_time_conversion]": {
    "recorded-date": "12-10-2024, 11:20:10",
    "recorded-content": {
      "table_creation_response": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "id",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "id",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "create_event_source_mapping_response": {
        "BatchSize": 1,
        "BisectBatchOnFunctionError": false,
        "DestinationConfig": {
          "OnFailure": {}
        },
        "EventSourceArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
        "EventSourceMappingArn": "arn:<partition>:lambda:<region>:111111111111:event-source-mapping:<uuid:2>",
        "FilterCriteria": {
          "Filters": [
            {
              "Pattern": {
                "dynamodb": {
                  "ApproximateCreationDateTime": "<approximate-creation-datetime>"
                }
              }
            }
          ]
        },
        "FunctionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:3>",
        "FunctionResponseTypes": [],
        "LastModified": "<datetime>",
        "LastProcessingResult": "No records processed",
        "MaximumBatchingWindowInSeconds": 1,
        "MaximumRecordAgeInSeconds": -1,
        "MaximumRetryAttempts": 1,
        "ParallelizationFactor": 1,
        "StartingPosition": "TRIM_HORIZON",
        "State": "Creating",
        "StateTransitionReason": "User action",
        "TumblingWindowInSeconds": 0,
        "UUID": "<uuid:2>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 202
        }
      },
      "lambda-log-events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "id": {
                    "S": "id_value_1"
                  }
                },
                "NewImage": {
                  "id": {
                    "S": "id_value_1"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 24,
                "StreamViewType": "NEW_AND_OLD_IMAGES"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ],
      "lambda-multiple-log-events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "id": {
                    "S": "id_value_1"
                  }
                },
                "NewImage": {
                  "id": {
                    "S": "id_value_1"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 24,
                "StreamViewType": "NEW_AND_OLD_IMAGES"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        },
        {
          "Records": [
            {
              "eventID": "<event-i-d:2>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "id": {
                    "S": "id_value_2"
                  }
                },
                "NewImage": {
                  "id": {
                    "S": "id_value_2"
                  }
                },
                "SequenceNumber": "<sequence-number:2>",
                "SizeBytes": 24,
                "StreamViewType": "NEW_AND_OLD_IMAGES"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ]
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_event_source_mapping_with_sns_on_failure_destination_config": {
    "recorded-date": "12-10-2024, 10:59:12",
    "recorded-content": {
      "create_table_response": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "my_partition_key",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "my_partition_key",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "update_table_response": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "my_partition_key",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST",
            "LastUpdateToPayPerRequestDateTime": "<datetime>"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "my_partition_key",
              "KeyType": "HASH"
            }
          ],
          "LatestStreamArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
          "LatestStreamLabel": "<resource:2>",
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "StreamSpecification": {
            "StreamEnabled": true,
            "StreamViewType": "NEW_IMAGE"
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "UPDATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "create_event_source_mapping_response": {
        "BatchSize": 1,
        "BisectBatchOnFunctionError": false,
        "DestinationConfig": {
          "OnFailure": {
            "Destination": "arn:<partition>:sns:<region>:111111111111:<resource:3>"
          }
        },
        "EventSourceArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
        "EventSourceMappingArn": "arn:<partition>:lambda:<region>:111111111111:event-source-mapping:<uuid:2>",
        "FunctionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:4>",
        "FunctionResponseTypes": [],
        "LastModified": "<datetime>",
        "LastProcessingResult": "No records processed",
        "MaximumBatchingWindowInSeconds": 1,
        "MaximumRecordAgeInSeconds": -1,
        "MaximumRetryAttempts": 1,
        "ParallelizationFactor": 1,
        "StartingPosition": "TRIM_HORIZON",
        "State": "Creating",
        "StateTransitionReason": "User action",
        "TumblingWindowInSeconds": 0,
        "UUID": "<uuid:2>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 202
        }
      },
      "failure_sns_message": {
        "Message": {
          "requestContext": {
            "requestId": "<uuid:3>",
            "functionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:4>",
            "condition": "RetryAttemptsExhausted",
            "approximateInvokeCount": 2
          },
          "responseContext": {
            "statusCode": 200,
            "executedVersion": "$LATEST",
            "functionError": "Unhandled"
          },
          "version": "1.0",
          "timestamp": "<timestamp:2022-07-13T13:48:01.000Z>",
          "DDBStreamBatchInfo": {
            "shardId": "<shard-id:1>",
            "startSequenceNumber": "<start-sequence-number:1>",
            "endSequenceNumber": "<start-sequence-number:1>",
            "approximateArrivalOfFirstRecord": "<timestamp:2022-07-13T13:48:01Z>",
            "approximateArrivalOfLastRecord": "<timestamp:2022-07-13T13:48:01Z>",
            "batchSize": 1,
            "streamArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
          }
        },
        "MessageId": "<uuid:4>",
        "Signature": "<signature>",
        "SignatureVersion": "1",
        "SigningCertURL": "<cert-domain>/SimpleNotificationService-<signing-cert-file:1>",
        "Timestamp": "<timestamp:2022-07-13T13:48:01.000Z>",
        "TopicArn": "arn:<partition>:sns:<region>:111111111111:<resource:3>",
        "Type": "Notification",
        "UnsubscribeURL": "<unsubscribe-domain>/?Action=Unsubscribe&SubscriptionArn=arn:<partition>:sns:<region>:111111111111:<resource:3>:<resource:5>"
      }
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_report_batch_item_failures": {
    "recorded-date": "12-10-2024, 11:25:25",
    "recorded-content": {
      "create_table_response": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "my_partition_key",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "my_partition_key",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "update_table_response": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "my_partition_key",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST",
            "LastUpdateToPayPerRequestDateTime": "<datetime>"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "my_partition_key",
              "KeyType": "HASH"
            }
          ],
          "LatestStreamArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
          "LatestStreamLabel": "<resource:2>",
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "StreamSpecification": {
            "StreamEnabled": true,
            "StreamViewType": "NEW_IMAGE"
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "UPDATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "create_event_source_mapping_response": {
        "BatchSize": 3,
        "BisectBatchOnFunctionError": false,
        "DestinationConfig": {
          "OnFailure": {
            "Destination": "arn:<partition>:sqs:<region>:111111111111:<resource:3>"
          }
        },
        "EventSourceArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
        "EventSourceMappingArn": "arn:<partition>:lambda:<region>:111111111111:event-source-mapping:<uuid:2>",
        "FunctionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:4>",
        "FunctionResponseTypes": [
          "ReportBatchItemFailures"
        ],
        "LastModified": "<datetime>",
        "LastProcessingResult": "No records processed",
        "MaximumBatchingWindowInSeconds": 1,
        "MaximumRecordAgeInSeconds": -1,
        "MaximumRetryAttempts": 3,
        "ParallelizationFactor": 1,
        "StartingPosition": "TRIM_HORIZON",
        "State": "Creating",
        "StateTransitionReason": "User action",
        "TumblingWindowInSeconds": 0,
        "UUID": "<uuid:2>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 202
        }
      },
      "destination_queue_messages": {
        "Messages": [
          {
            "Body": {
              "requestContext": {
                "requestId": "<uuid:3>",
                "functionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:4>",
                "condition": "RetryAttemptsExhausted",
                "approximateInvokeCount": 4
              },
              "responseContext": {
                "statusCode": 200,
                "executedVersion": "$LATEST",
                "functionError": null
              },
              "version": "1.0",
              "timestamp": "<timestamp:2022-07-13T13:48:01.000Z>",
              "DDBStreamBatchInfo": {
                "shardId": "<shard-id:1>",
                "startSequenceNumber": "<sequence-number:6>",
                "endSequenceNumber": "<sequence-number:6>",
                "approximateArrivalOfFirstRecord": "<timestamp:2022-07-13T13:48:01Z>",
                "approximateArrivalOfLastRecord": "<timestamp:2022-07-13T13:48:01Z>",
                "batchSize": 1,
                "streamArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
              }
            },
            "MD5OfBody": "<m-d5-of-body:1>",
            "MessageId": "<uuid:4>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "dynamodb_records": {
        "Records": [
          {
            "awsRegion": "<region>",
            "dynamodb": {
              "ApproximateCreationDateTime": "<approximate-creation-datetime>",
              "Keys": {
                "my_partition_key": {
                  "S": "testId0"
                }
              },
              "NewImage": {
                "my_partition_key": {
                  "S": "testId0"
                },
                "should_fail": {
                  "BOOL": false
                }
              },
              "SequenceNumber": "<sequence-number:1>",
              "SizeBytes": 58,
              "StreamViewType": "NEW_IMAGE"
            },
            "eventID": "<event-i-d:1>",
            "eventName": "INSERT",
            "eventSource": "aws:dynamodb",
            "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
            "eventVersion": "1.1"
          },
          {
            "awsRegion": "<region>",
            "dynamodb": {
              "ApproximateCreationDateTime": "<approximate-creation-datetime>",
              "Keys": {
                "my_partition_key": {
                  "S": "testId1"
                }
              },
              "NewImage": {
                "my_partition_key": {
                  "S": "testId1"
                },
                "should_fail": {
                  "BOOL": false
                }
              },
              "SequenceNumber": "<sequence-number:2>",
              "SizeBytes": 58,
              "StreamViewType": "NEW_IMAGE"
            },
            "eventID": "<event-i-d:2>",
            "eventName": "INSERT",
            "eventSource": "aws:dynamodb",
            "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
            "eventVersion": "1.1"
          },
          {
            "awsRegion": "<region>",
            "dynamodb": {
              "ApproximateCreationDateTime": "<approximate-creation-datetime>",
              "Keys": {
                "my_partition_key": {
                  "S": "testId2"
                }
              },
              "NewImage": {
                "my_partition_key": {
                  "S": "testId2"
                },
                "should_fail": {
                  "BOOL": false
                }
              },
              "SequenceNumber": "<sequence-number:3>",
              "SizeBytes": 58,
              "StreamViewType": "NEW_IMAGE"
            },
            "eventID": "<event-i-d:3>",
            "eventName": "INSERT",
            "eventSource": "aws:dynamodb",
            "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
            "eventVersion": "1.1"
          },
          {
            "awsRegion": "<region>",
            "dynamodb": {
              "ApproximateCreationDateTime": "<approximate-creation-datetime>",
              "Keys": {
                "my_partition_key": {
                  "S": "testId3"
                }
              },
              "NewImage": {
                "my_partition_key": {
                  "S": "testId3"
                },
                "should_fail": {
                  "BOOL": false
                }
              },
              "SequenceNumber": "<sequence-number:4>",
              "SizeBytes": 58,
              "StreamViewType": "NEW_IMAGE"
            },
            "eventID": "<event-i-d:4>",
            "eventName": "INSERT",
            "eventSource": "aws:dynamodb",
            "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
            "eventVersion": "1.1"
          },
          {
            "awsRegion": "<region>",
            "dynamodb": {
              "ApproximateCreationDateTime": "<approximate-creation-datetime>",
              "Keys": {
                "my_partition_key": {
                  "S": "testId4"
                }
              },
              "NewImage": {
                "my_partition_key": {
                  "S": "testId4"
                },
                "should_fail": {
                  "BOOL": false
                }
              },
              "SequenceNumber": "<sequence-number:5>",
              "SizeBytes": 58,
              "StreamViewType": "NEW_IMAGE"
            },
            "eventID": "<event-i-d:5>",
            "eventName": "INSERT",
            "eventSource": "aws:dynamodb",
            "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
            "eventVersion": "1.1"
          },
          {
            "awsRegion": "<region>",
            "dynamodb": {
              "ApproximateCreationDateTime": "<approximate-creation-datetime>",
              "Keys": {
                "my_partition_key": {
                  "S": "testId5"
                }
              },
              "NewImage": {
                "my_partition_key": {
                  "S": "testId5"
                },
                "should_fail": {
                  "BOOL": true
                }
              },
              "SequenceNumber": "<sequence-number:6>",
              "SizeBytes": 58,
              "StreamViewType": "NEW_IMAGE"
            },
            "eventID": "<event-i-d:6>",
            "eventName": "INSERT",
            "eventSource": "aws:dynamodb",
            "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
            "eventVersion": "1.1"
          },
          {
            "awsRegion": "<region>",
            "dynamodb": {
              "ApproximateCreationDateTime": "<approximate-creation-datetime>",
              "Keys": {
                "my_partition_key": {
                  "S": "testId5"
                }
              },
              "NewImage": {
                "my_partition_key": {
                  "S": "testId5"
                },
                "should_fail": {
                  "BOOL": true
                }
              },
              "SequenceNumber": "<sequence-number:6>",
              "SizeBytes": 58,
              "StreamViewType": "NEW_IMAGE"
            },
            "eventID": "<event-i-d:6>",
            "eventName": "INSERT",
            "eventSource": "aws:dynamodb",
            "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
            "eventVersion": "1.1"
          },
          {
            "awsRegion": "<region>",
            "dynamodb": {
              "ApproximateCreationDateTime": "<approximate-creation-datetime>",
              "Keys": {
                "my_partition_key": {
                  "S": "testId5"
                }
              },
              "NewImage": {
                "my_partition_key": {
                  "S": "testId5"
                },
                "should_fail": {
                  "BOOL": true
                }
              },
              "SequenceNumber": "<sequence-number:6>",
              "SizeBytes": 58,
              "StreamViewType": "NEW_IMAGE"
            },
            "eventID": "<event-i-d:6>",
            "eventName": "INSERT",
            "eventSource": "aws:dynamodb",
            "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
            "eventVersion": "1.1"
          },
          {
            "awsRegion": "<region>",
            "dynamodb": {
              "ApproximateCreationDateTime": "<approximate-creation-datetime>",
              "Keys": {
                "my_partition_key": {
                  "S": "testId5"
                }
              },
              "NewImage": {
                "my_partition_key": {
                  "S": "testId5"
                },
                "should_fail": {
                  "BOOL": true
                }
              },
              "SequenceNumber": "<sequence-number:6>",
              "SizeBytes": 58,
              "StreamViewType": "NEW_IMAGE"
            },
            "eventID": "<event-i-d:6>",
            "eventName": "INSERT",
            "eventSource": "aws:dynamodb",
            "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
            "eventVersion": "1.1"
          },
          {
            "awsRegion": "<region>",
            "dynamodb": {
              "ApproximateCreationDateTime": "<approximate-creation-datetime>",
              "Keys": {
                "my_partition_key": {
                  "S": "testId5"
                }
              },
              "NewImage": {
                "my_partition_key": {
                  "S": "testId5"
                },
                "should_fail": {
                  "BOOL": true
                }
              },
              "SequenceNumber": "<sequence-number:6>",
              "SizeBytes": 58,
              "StreamViewType": "NEW_IMAGE"
            },
            "eventID": "<event-i-d:6>",
            "eventName": "INSERT",
            "eventSource": "aws:dynamodb",
            "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
            "eventVersion": "1.1"
          }
        ]
      }
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_report_batch_item_failures_with_on_failure_destination_config": {
    "recorded-date": "11-09-2024, 11:52:02",
    "recorded-content": {
      "create_table_response": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "my_partition_key",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "my_partition_key",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "update_table_response": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "my_partition_key",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST",
            "LastUpdateToPayPerRequestDateTime": "<datetime>"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "my_partition_key",
              "KeyType": "HASH"
            }
          ],
          "LatestStreamArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
          "LatestStreamLabel": "<resource:2>",
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "StreamSpecification": {
            "StreamEnabled": true,
            "StreamViewType": "NEW_IMAGE"
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "UPDATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "create_event_source_mapping_response": {
        "BatchSize": 3,
        "BisectBatchOnFunctionError": false,
        "DestinationConfig": {
          "OnFailure": {
            "Destination": "arn:<partition>:sqs:<region>:111111111111:<resource:3>"
          }
        },
        "EventSourceArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>",
        "FunctionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:4>",
        "FunctionResponseTypes": [
          "ReportBatchItemFailures"
        ],
        "LastModified": "<datetime>",
        "LastProcessingResult": "No records processed",
        "MaximumBatchingWindowInSeconds": 1,
        "MaximumRecordAgeInSeconds": -1,
        "MaximumRetryAttempts": 3,
        "ParallelizationFactor": 1,
        "StartingPosition": "TRIM_HORIZON",
        "State": "Creating",
        "StateTransitionReason": "User action",
        "TumblingWindowInSeconds": 0,
        "UUID": "<uuid:2>",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 202
        }
      },
      "destination_queue_messages": {
        "Messages": [
          {
            "Body": {
              "requestContext": {
                "requestId": "<uuid:3>",
                "functionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:4>",
                "condition": "RetryAttemptsExhausted",
                "approximateInvokeCount": 4
              },
              "responseContext": {
                "statusCode": 200,
                "executedVersion": "$LATEST",
                "functionError": null
              },
              "version": "1.0",
              "timestamp": "<timestamp:2022-07-13T13:48:01.000Z>",
              "DDBStreamBatchInfo": {
                "shardId": "<shard-id:1>",
                "startSequenceNumber": "<start-sequence-number:1>",
                "endSequenceNumber": "<start-sequence-number:1>",
                "approximateArrivalOfFirstRecord": "<timestamp:2022-07-13T13:48:01Z>",
                "approximateArrivalOfLastRecord": "<timestamp:2022-07-13T13:48:01Z>",
                "batchSize": 1,
                "streamArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
              }
            },
            "MD5OfBody": "<m-d5-of-body:1>",
            "MessageId": "<uuid:4>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_report_batch_item_failure_scenarios[empty_string_item_identifier_failure]": {
    "recorded-date": "12-10-2024, 11:30:34",
    "recorded-content": {
      "create-table-result": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "my_partition_key",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "my_partition_key",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "destination_queue_messages": {
        "Messages": [
          {
            "Body": {
              "requestContext": {
                "requestId": "<uuid:2>",
                "functionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:2>",
                "condition": "RetryAttemptsExhausted",
                "approximateInvokeCount": 4
              },
              "responseContext": {
                "statusCode": 200,
                "executedVersion": "$LATEST",
                "functionError": null
              },
              "version": "1.0",
              "timestamp": "<timestamp:2022-07-13T13:48:01.000Z>",
              "DDBStreamBatchInfo": {
                "shardId": "<shard-id:1>",
                "startSequenceNumber": "<sequence-number:1>",
                "endSequenceNumber": "<sequence-number:1>",
                "approximateArrivalOfFirstRecord": "<timestamp:2022-07-13T13:48:01Z>",
                "approximateArrivalOfLastRecord": "<timestamp:2022-07-13T13:48:01Z>",
                "batchSize": 1,
                "streamArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
              }
            },
            "MD5OfBody": "<m-d5-of-body:1>",
            "MessageId": "<uuid:3>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "dynamodb_events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        },
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        },
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        },
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        }
      ]
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_report_batch_item_failure_scenarios[null_item_identifier_failure]": {
    "recorded-date": "12-10-2024, 11:33:20",
    "recorded-content": {
      "create-table-result": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "my_partition_key",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "my_partition_key",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "destination_queue_messages": {
        "Messages": [
          {
            "Body": {
              "requestContext": {
                "requestId": "<uuid:2>",
                "functionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:2>",
                "condition": "RetryAttemptsExhausted",
                "approximateInvokeCount": 4
              },
              "responseContext": {
                "statusCode": 200,
                "executedVersion": "$LATEST",
                "functionError": null
              },
              "version": "1.0",
              "timestamp": "<timestamp:2022-07-13T13:48:01.000Z>",
              "DDBStreamBatchInfo": {
                "shardId": "<shard-id:1>",
                "startSequenceNumber": "<sequence-number:1>",
                "endSequenceNumber": "<sequence-number:1>",
                "approximateArrivalOfFirstRecord": "<timestamp:2022-07-13T13:48:01Z>",
                "approximateArrivalOfLastRecord": "<timestamp:2022-07-13T13:48:01Z>",
                "batchSize": 1,
                "streamArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
              }
            },
            "MD5OfBody": "<m-d5-of-body:1>",
            "MessageId": "<uuid:3>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "dynamodb_events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        },
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        },
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        },
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        }
      ]
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_report_batch_item_failure_scenarios[invalid_key_foo_failure]": {
    "recorded-date": "12-10-2024, 11:35:08",
    "recorded-content": {
      "create-table-result": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "my_partition_key",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "my_partition_key",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "destination_queue_messages": {
        "Messages": [
          {
            "Body": {
              "requestContext": {
                "requestId": "<uuid:2>",
                "functionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:2>",
                "condition": "RetryAttemptsExhausted",
                "approximateInvokeCount": 4
              },
              "responseContext": {
                "statusCode": 200,
                "executedVersion": "$LATEST",
                "functionError": null
              },
              "version": "1.0",
              "timestamp": "<timestamp:2022-07-13T13:48:01.000Z>",
              "DDBStreamBatchInfo": {
                "shardId": "<shard-id:1>",
                "startSequenceNumber": "<sequence-number:1>",
                "endSequenceNumber": "<sequence-number:1>",
                "approximateArrivalOfFirstRecord": "<timestamp:2022-07-13T13:48:01Z>",
                "approximateArrivalOfLastRecord": "<timestamp:2022-07-13T13:48:01Z>",
                "batchSize": 1,
                "streamArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
              }
            },
            "MD5OfBody": "<m-d5-of-body:1>",
            "MessageId": "<uuid:3>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "dynamodb_events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        },
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        },
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        },
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        }
      ]
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_report_batch_item_failure_scenarios[invalid_key_foo_null_value_failure]": {
    "recorded-date": "14-10-2024, 21:33:18",
    "recorded-content": {
      "create-table-result": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "my_partition_key",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "my_partition_key",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "destination_queue_messages": {
        "Messages": [
          {
            "Body": {
              "requestContext": {
                "requestId": "<uuid:2>",
                "functionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:2>",
                "condition": "RetryAttemptsExhausted",
                "approximateInvokeCount": 4
              },
              "responseContext": {
                "statusCode": 200,
                "executedVersion": "$LATEST",
                "functionError": null
              },
              "version": "1.0",
              "timestamp": "<timestamp:2022-07-13T13:48:01.000Z>",
              "DDBStreamBatchInfo": {
                "shardId": "<shard-id:1>",
                "startSequenceNumber": "<sequence-number:1>",
                "endSequenceNumber": "<sequence-number:1>",
                "approximateArrivalOfFirstRecord": "<timestamp:2022-07-13T13:48:01Z>",
                "approximateArrivalOfLastRecord": "<timestamp:2022-07-13T13:48:01Z>",
                "batchSize": 1,
                "streamArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
              }
            },
            "MD5OfBody": "<m-d5-of-body:1>",
            "MessageId": "<uuid:3>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "dynamodb_events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        },
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        },
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        },
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        }
      ]
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_report_batch_item_failure_scenarios[unhandled_exception_in_function]": {
    "recorded-date": "12-10-2024, 11:39:13",
    "recorded-content": {
      "create-table-result": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "my_partition_key",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "my_partition_key",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "destination_queue_messages": {
        "Messages": [
          {
            "Body": {
              "requestContext": {
                "requestId": "<uuid:2>",
                "functionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:2>",
                "condition": "RetryAttemptsExhausted",
                "approximateInvokeCount": 4
              },
              "responseContext": {
                "statusCode": 200,
                "executedVersion": "$LATEST",
                "functionError": "Unhandled"
              },
              "version": "1.0",
              "timestamp": "<timestamp:2022-07-13T13:48:01.000Z>",
              "DDBStreamBatchInfo": {
                "shardId": "<shard-id:1>",
                "startSequenceNumber": "<sequence-number:1>",
                "endSequenceNumber": "<sequence-number:1>",
                "approximateArrivalOfFirstRecord": "<timestamp:2022-07-13T13:48:01Z>",
                "approximateArrivalOfLastRecord": "<timestamp:2022-07-13T13:48:01Z>",
                "batchSize": 1,
                "streamArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
              }
            },
            "MD5OfBody": "<m-d5-of-body:1>",
            "MessageId": "<uuid:3>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "dynamodb_events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        },
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        },
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        },
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        }
      ]
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_report_batch_item_success_scenarios[empty_list_success]": {
    "recorded-date": "12-10-2024, 11:40:57",
    "recorded-content": {
      "create-table-result": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "my_partition_key",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "my_partition_key",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "dynamodb_events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ]
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_report_batch_item_success_scenarios[null_success]": {
    "recorded-date": "12-10-2024, 11:42:06",
    "recorded-content": {
      "create-table-result": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "my_partition_key",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "my_partition_key",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "dynamodb_events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ]
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_report_batch_item_success_scenarios[empty_dict_success]": {
    "recorded-date": "12-10-2024, 11:43:06",
    "recorded-content": {
      "create-table-result": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "my_partition_key",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "my_partition_key",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "dynamodb_events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ]
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_report_batch_item_success_scenarios[empty_batch_item_failure_success]": {
    "recorded-date": "12-10-2024, 11:44:06",
    "recorded-content": {
      "create-table-result": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "my_partition_key",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "my_partition_key",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "dynamodb_events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ]
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_report_batch_item_success_scenarios[null_batch_item_failure_success]": {
    "recorded-date": "12-10-2024, 11:45:51",
    "recorded-content": {
      "create-table-result": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "my_partition_key",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "my_partition_key",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "dynamodb_events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:2>"
            }
          ]
        }
      ]
    }
  },
  "tests/aws/services/lambda_/event_source_mapping/test_lambda_integration_dynamodbstreams.py::TestDynamoDBEventSourceMapping::test_dynamodb_report_batch_item_failure_scenarios[item_identifier_not_present_failure]": {
    "recorded-date": "12-10-2024, 11:27:29",
    "recorded-content": {
      "create-table-result": {
        "TableDescription": {
          "AttributeDefinitions": [
            {
              "AttributeName": "my_partition_key",
              "AttributeType": "S"
            }
          ],
          "BillingModeSummary": {
            "BillingMode": "PAY_PER_REQUEST"
          },
          "CreationDateTime": "<datetime>",
          "DeletionProtectionEnabled": false,
          "ItemCount": 0,
          "KeySchema": [
            {
              "AttributeName": "my_partition_key",
              "KeyType": "HASH"
            }
          ],
          "ProvisionedThroughput": {
            "NumberOfDecreasesToday": 0,
            "ReadCapacityUnits": 0,
            "WriteCapacityUnits": 0
          },
          "TableArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>",
          "TableId": "<uuid:1>",
          "TableName": "<resource:1>",
          "TableSizeBytes": 0,
          "TableStatus": "CREATING"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "destination_queue_messages": {
        "Messages": [
          {
            "Body": {
              "requestContext": {
                "requestId": "<uuid:2>",
                "functionArn": "arn:<partition>:lambda:<region>:111111111111:function:<resource:2>",
                "condition": "RetryAttemptsExhausted",
                "approximateInvokeCount": 4
              },
              "responseContext": {
                "statusCode": 200,
                "executedVersion": "$LATEST",
                "functionError": null
              },
              "version": "1.0",
              "timestamp": "<timestamp:2022-07-13T13:48:01.000Z>",
              "DDBStreamBatchInfo": {
                "shardId": "<shard-id:1>",
                "startSequenceNumber": "<sequence-number:1>",
                "endSequenceNumber": "<sequence-number:1>",
                "approximateArrivalOfFirstRecord": "<timestamp:2022-07-13T13:48:01Z>",
                "approximateArrivalOfLastRecord": "<timestamp:2022-07-13T13:48:01Z>",
                "batchSize": 1,
                "streamArn": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
              }
            },
            "MD5OfBody": "<m-d5-of-body:1>",
            "MessageId": "<uuid:3>",
            "ReceiptHandle": "<receipt-handle:1>"
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "dynamodb_events": [
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        },
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        },
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        },
        {
          "Records": [
            {
              "eventID": "<event-i-d:1>",
              "eventName": "INSERT",
              "eventVersion": "1.1",
              "eventSource": "aws:dynamodb",
              "awsRegion": "<region>",
              "dynamodb": {
                "ApproximateCreationDateTime": "<approximate-creation-datetime>",
                "Keys": {
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "NewImage": {
                  "binary_key": {
                    "B": "Zm9vYmFy"
                  },
                  "my_partition_key": {
                    "S": "hello world"
                  }
                },
                "SequenceNumber": "<sequence-number:1>",
                "SizeBytes": 70,
                "StreamViewType": "NEW_IMAGE"
              },
              "eventSourceARN": "arn:<partition>:dynamodb:<region>:111111111111:table/<resource:1>/stream/<resource:3>"
            }
          ]
        }
      ]
    }
  }
}
