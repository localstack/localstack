Resources:
  NewKeyPair:
    Type: 'AWS::EC2::KeyPair'
    Properties:
      KeyName: !Sub 'keypair-${AWS::StackName}'
  Ec2Instance:
    Type: 'AWS::EC2::Instance'
    Properties:
      ImageId: "ami-0e9107ed11be76fde"
      KeyName: !Ref NewKeyPair

Outputs:
  KeyPairName:
    Value: !Ref NewKeyPair

  InstanceId:
    Value: !Ref Ec2Instance
